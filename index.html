<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shehadeh Center</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        header {
            background-color: #333;
            color: white;
            padding: 1.5em;
            text-align: center;
        }

        h2 {
    font-size: 2em;  /* زيادة حجم الخط لجعل النص أكثر وضوحًا */
    margin-bottom: 1.5em;  /* زيادة المسافة أسفل النص */
    color: #1f201f;  /* اختيار لون مميز للنص (أخضر) */
    text-transform: uppercase;  /* تحويل النص إلى حروف كبيرة */
    letter-spacing: 2px;  /* زيادة المسافة بين الحروف */
    font-weight: bold;  /* جعل النص سميكًا */
    text-align: center;  /* توسيط النص */
    background-color: #f0f0f0;  /* خلفية خفيفة للنص */
    padding: 0.5em 0;  /* إضافة مسافة داخلية من الأعلى والأسفل */
    border-radius: 5px;  /* إضافة حواف دائرية للخلفية */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);  /* إضافة ظل خفيف حول النص */
    max-width: 90%;  /* تحديد أقصى عرض للنص */
    margin-left: auto;  /* توسيط النص أفقيًا */
    margin-right: auto;  /* توسيط النص أفقيًا */
}

        .products-container {
            display: flex;
            flex-wrap: wrap; /* السماح بتغيير الصف عند انتهاء العرض */
            justify-content: center; /* محاذاة العناصر في المنتصف */
            padding: 2em;
            gap: 1em; /* إضافة مسافة بين العناصر */
        }

.product {
    background-color: white;
    width: 300px;
    margin: 0.7em;
    padding: 0.7em;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
    transition: transform 0.3s ease;
}

/* تصميم مخصص للأجهزة المحمولة */
@media (max-width: 768px) { /* العرض الأقصى 768px */
    .product {
        width: 90%; /* العرض يكون 100% من حجم الشاشة */
        box-sizing: border-box; /* لضمان عدم تجاوز الحواف */
    }
}

        .product:hover {
            transform: translateY(-10px);
        }

      .product img {
          max-width: 100%;
          border-radius: 8px;
          margin-bottom: 1em;
      }

      .product-name {
          font-size: 1.2em;
          color: #333;
          margin-bottom: 0.5em;
          font-weight: bold;
      }

      .product-price {
          font-size: 1.1em;
          color: #e74c3c;
          margin-bottom: 1em;
      }

      .add-to-cart {
          background-color: #3498db;
          color: white;
          border: none;
          padding: 0.7em 0.7em;
          border-radius: 5px;
          cursor: pointer;
          transition: background-color 0.3s ease;
      }

      .add-to-cart:hover {
          background-color: #2980b9;
      }



      .cart {
    position: fixed;
    top: 0;
    right: 0;
    background-color: white;
    border: 1px solid #ccc;
    padding: 1em;
    width: 80%;  /* عرض السلة بنسبة 90% من عرض الصفحة */
    height: 100%;
    overflow-y: auto;
    box-shadow: -2px 0px 10px rgba(0, 0, 0, 0.1);
    transition: top 0.3s ease-in-out;  /* إضافة انتقال لتحريك السلة */
}

.cart.hidden {
    top: -80%;  /* إخفاء السلة عن طريق رفعها فوق الشاشة */
}

.toggle-cart {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 0.5em;
    cursor: pointer;
    margin-top: 1em;
}  
      .cart-item {
          margin-bottom: 1em;
          display: flex;
          justify-content: space-between;
          align-items: center;
      }

      .cart-item button {
          background-color: red;
          color: white;
          border: none;
          cursor: pointer;
          padding: 0.2em 0.5em;
      }

/* تصميم زر المشاركة بنفس حجم زر إخفاء السلة */
.share-button {
    padding: 10px 20px;  /* نفس المسافة الداخلية مثل زر إخفاء السلة */
    font-size: 16px;  /* نفس حجم الخط */
    font-weight: bold;  /* نفس الخط السميك */
    border: none;  /* إزالة الحدود */
    border-radius: 8px;  /* نفس الحواف الدائرية */
    color: white;  /* لون النص أبيض */
    cursor: pointer;  /* تغيير المؤشر عند المرور على الزر */
    transition: transform 0.2s;  /* تأثير الانتقال (رفع الزر عند النقر) */
    width: 200px;  /* نفس العرض مثل زر إخفاء السلة */
    margin-bottom: 10px;  /* نفس المسافة بين الأزرار */
    animation: colorChange 5s infinite;  /* تطبيق نفس تأثير تغيير الألوان */
}

/* تأثير تغيير الألوان بشكل مستمر */
@keyframes colorChange {
    0% {
        background-color: #1e7e34;  /* اللون الأول (أخضر داكن) */
    }
    25% {
        background-color: #ff5722;  /* اللون الثاني (برتقالي) */
    }
    50% {
        background-color: #2196F3;  /* اللون الثالث (أزرق) */
    }
    75% {
        background-color: #f44336;  /* اللون الرابع (أحمر) */
    }
    100% {
        background-color: #1e7e34;  /* العودة إلى اللون الأول (أخضر داكن) */
    }
}

/* يمكن إضافة تأثيرات عند التفاعل مع زر المشاركة إذا لزم الأمر */
.share-button:hover {
    transform: translateY(-3px);  /* رفع الزر عند التحويم */
}

.share-button:active {
    transform: translateY(0);  /* العودة إلى الوضع الطبيعي عند النقر */
}

      .popup {
          display: none;
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background-color: white;
          border: 1px solid #ccc;
          padding: 1em;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
          border-radius: 8px;
      }

      .popup input {
          margin-bottom: 1em;
          width: 100%;
          padding: 0.5em;
      }

      .popup button {
          margin-right: 0.5em;
      }
      /* إعداد عام لعناصر الأزرار والمحتوى */
.product {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    margin: 20px;
    border: 1px solid #ddd;
    padding: 20px;
    border-radius: 10px;
    background-color: #f9f9f9;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.product:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

/* تصميم صورة المنتج */
.product img {
    max-width: 100%;
    height: auto;
    border-radius: 10px;
    margin-bottom: 15px;
}

/* تصميم تفاصيل المنتج */
.product .product-details {
    margin-bottom: 15px;
}

/* إعداد الأزرار الخاصة بالكمية */
.quantity-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 15px;
}
/* تنسيق الأزرار + و - */
.quantity-controls button {
    padding: 12px;
    font-size: 20px;
    background-color: #e0f3ff; /* لون أزرق فاتح */
    border: 2px solid #aad8ff;
    border-radius: 5px; /* مربعات بحواف خفيفة */
    margin: 0 10px;
    cursor: pointer;
    transition: transform 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;
}

/* تأثير ديناميكي على الأزرار عند التمرير */
.quantity-controls button:hover {
    background-color: #cbe8ff; /* درجة أفتح عند التمرير */
    border-color: #8ccfff;
}

/* تأثير عند الضغط على الأزرار */
.quantity-controls button:active {
    transform: scale(1.1); /* تكبير الزر قليلاً */
    background-color: #007bff; /* أزرق غامق عند الضغط */
    color: #fff;
    border-color: #0056b3;
}

/* تنسيق حقل إدخال الكمية */
.quantity-controls input {
    width: 70px;
    height: 40px;
    font-size: 18px;
    text-align: center;
    border-radius: 5px;
    border: 1px solid #ddd;
    margin: 0 10px;
    padding: 5px;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

/* تغيير الحدود عند التركيز على حقل إدخال الكمية */
.quantity-controls input:focus {
    border-color: #007bff;
    outline: none;
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
}


/* تصميم زر إضافة إلى السلة */
.add-to-cart-btn {
    background: linear-gradient(90deg, #007bff, #00aaff, #007bff);
    color: white;
    padding: 11px 24px;
    border: none;
    border-radius: 25px;
    font-size: 20px;
    cursor: pointer;
    transition: transform 0.3s ease, background-color 0.3s ease;
    margin-top: 20px;
    width: 100%;
    text-transform: uppercase;
}

/* تغيير اللون عند مرور الماوس على زر إضافة إلى السلة */
.add-to-cart-btn:hover {
    background: linear-gradient(90deg, #0066cc, #0099cc, #0066cc);
    transform: scale(1.1);
}

/* إخفاء الزر "Add to Cart" عندما تظهر أدوات الكمية */
.quantity-controls.show {
    display: block !important;
}

/* إخفاء أدوات الكمية عند بدء عرض المنتج */
.quantity-controls {
    display: none;
}

/* تنسيق السلة في صفحة الكارت */
.cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #ddd;
    padding: 10px 0;
    font-size: 16px;
    color: #333;
}

.cart-item .cart-quantity {
    width: 60px;
    text-align: center;
    padding: 5px;
    font-size: 16px;
    border: 1px solid #ddd;
    border-radius: 5px;
}

.cart-item button {
    background-color: #f44336;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.cart-item button:hover {
    background-color: #e53935;
}

.cart-total {
    font-size: 20px;
    font-weight: bold;
    text-align: right;
    margin-top: 20px;
}

/* تصميم الحافة الجمالية لمربع النص */
.product .product-details strong {
    font-size: 18px;
    font-weight: bold;
    color: #333;
}

#toggle-cart-button {
  float: left;
}
/* تصميم الأزرار */
.toggle-cart {
    padding: 10px 20px;  /* المسافة الداخلية داخل الزر */
    font-size: 16px;  /* حجم الخط */
    font-weight: bold;  /* جعل الخط سميكًا */
    border: none;  /* إزالة الحدود */
    border-radius: 8px;  /* حواف دائرية للزر */
    color: white;  /* لون النص */
    cursor: pointer;  /* تغيير المؤشر عند المرور على الزر */
    transition: transform 0.2s;  /* تأثير الانتقال */
    width: 200px;  /* عرض الزر */
    margin-bottom: 10px;  /* مسافة بين الأزرار */
    animation: colorChange 5s infinite;  /* تطبيق تأثير التغيير اللوني */
}

/* تأثير تغيير الألوان بشكل مستمر */
@keyframes colorChange {
    0% {
        background-color: #ff0000e7;  /* اللون الأول (أخضر) */
    }
    25% {
        background-color: #ff9800;  /* اللون الثاني (برتقالي) */
    }
    50% {
        background-color: #ff0000;  /* اللون الثالث (أزرق) */
    }
    75% {
        background-color: #ffa600;  /* اللون الرابع (أحمر) */
    }
    100% {
        background-color: #ff0000;  /* العودة إلى اللون الأول (أخضر) */
    }
}
  </style>
</head>
<body>
    <header>
        <h1>Shehadeh Center</h1>
        <button class="toggle-cart" id="show-cart-button">إظهار الفاتورة</button>
    </header>
    <main>
        <div id="categories"></div>
    </main>
    <div class="cart" id="cart">
        <h2>Cart</h2>
        <div id="cart-items"></div>
        <button class="share-button" id="checkout-button">ارسال طلبية</button>
        <br>
        <button class="toggle-cart" id="hide-cart-button">إخفاء الفاتورة</button>
    </div>
    <div class="popup" id="popup">
        <h2>Customer Details</h2>
        <input type="text" id="customer-name" placeholder="Enter your name">
        <input type="text" id="customer-phone" placeholder="Enter your phone number">
        <button id="confirm-button">Confirm</button>
        <button id="cancel-button">Cancel</button>
    </div>

    <script>
const categoriesContainer = document.getElementById('categories');
const cartItemsContainer = document.getElementById('cart-items');
const checkoutButton = document.getElementById('checkout-button');
const popup = document.getElementById('popup');
const confirmButton = document.getElementById('confirm-button');
const cancelButton = document.getElementById('cancel-button');

const customerNameInput = document.getElementById('customer-name');
const customerPhoneInput = document.getElementById('customer-phone');

let products = [];
let cart = JSON.parse(localStorage.getItem('cart')) || [];

// Load products from test.txt
fetch('test.txt')
    .then(response => response.text())
    .then(data => {
        const lines = data.split('\n');
        lines.forEach(line => {
            // Splitting the line into components and assuming format: category/name/price/image_url
            const parts = line.split('/');
            if (parts.length >= 4) {
                // Handle image URL with query parameters (e.g., "?x-oss-process=image...")
                const imageUrl = parts.slice(3).join('/').trim(); // Combine all parts after the 3rd element
                products.push({
                    category: parts[0].trim(),
                    name: parts[1].trim(),
                    price: parseFloat(parts[2].trim()),
                    image: imageUrl
                });
            }
        });
        renderCategories();
        renderCart();
    })
    .catch(error => console.error('Error loading products:', error));

function renderCategories() {
    categoriesContainer.innerHTML = ''; // Clear previous categories
    const categories = [...new Set(products.map(p => p.category))];
    categories.forEach(category => {
        const categoryDiv = document.createElement('div');
        categoryDiv.className = 'category';

        const categoryTitle = document.createElement('h2');
        categoryTitle.textContent = category;
        categoryDiv.appendChild(categoryTitle);

        const categoryProducts = products.filter(p => p.category === category);
        categoryProducts.forEach(product => {
            const productDiv = document.createElement('div');
            productDiv.className = 'product';

            // Creating and adding image element with error handling
            const productImage = document.createElement('img');
            productImage.src = product.image;
            productImage.alt = product.name; // Adding alt text for better accessibility

            // Error handling for image load failure
            productImage.onerror = () => {
                productImage.src = 'default-image.jpg'; // Use a default image if the image URL is invalid
            };

            productDiv.appendChild(productImage);

            const productDetails = document.createElement('div');
            productDetails.innerHTML = `<strong>${product.name}</strong><br>Price: ${product.price.toFixed(2)} ₪`;
            productDiv.appendChild(productDetails);

            // Quantity input and control buttons
            const quantityDiv = document.createElement('div');
            quantityDiv.classList.add('quantity-controls');
            quantityDiv.style.display = 'none'; // Initially hidden

            const quantityInput = document.createElement('input');
            quantityInput.type = 'number';
            quantityInput.value = 1;
            quantityInput.min = 1; // Minimum quantity is 1
            quantityInput.style.width = '50px';
            quantityInput.addEventListener('focus', () => quantityInput.select()); // Automatically select text when clicked

            const increaseButton = document.createElement('button');
            increaseButton.textContent = '+';
            increaseButton.onclick = () => updateQuantity(quantityInput, 1);

            const decreaseButton = document.createElement('button');
            decreaseButton.textContent = '-';
            decreaseButton.onclick = () => updateQuantity(quantityInput, -1);

            quantityDiv.appendChild(decreaseButton);
            quantityDiv.appendChild(quantityInput);
            quantityDiv.appendChild(increaseButton);

            // Add To Cart Button
            const addToCartButton = document.createElement('button');
            addToCartButton.textContent = 'Add to Cart';
            addToCartButton.classList.add('add-to-cart-btn'); // Adding a class for better styling
            addToCartButton.onclick = () => {
                addToCart(product, quantityInput.value);
                quantityDiv.style.display = 'block'; // Show quantity controls after adding to cart
                addToCartButton.style.display = 'none'; // Hide the "Add to Cart" button
            };
            productDiv.appendChild(addToCartButton);

            // Check if the product is already in the cart
            const existingProduct = cart.find(item => item.name === product.name);
            if (existingProduct) {
                quantityDiv.style.display = 'block'; // Show quantity controls if the product is already in the cart
                addToCartButton.style.display = 'none'; // Hide "Add to Cart" button if product is in cart
                quantityInput.value = existingProduct.quantity; // Set the input to the correct quantity
            }

            productDiv.appendChild(quantityDiv);
            categoryDiv.appendChild(productDiv);
        });

        categoriesContainer.appendChild(categoryDiv);
    });
}

// Add product to cart
function addToCart(product, quantity) {
    quantity = parseInt(quantity);
    const existingProduct = cart.find(item => item.name === product.name);
    if (existingProduct) {
        existingProduct.quantity += quantity; // Update quantity if product already exists
    } else {
        cart.push({ ...product, quantity });
    }
    saveCart();
    renderCart();
}

// Update product quantity in cart (interactive)
function updateQuantity(input, change) {
    let newQuantity = parseInt(input.value) + change;
    if (newQuantity >= 1) { // Ensure quantity doesn't go below 1
        input.value = newQuantity;
    }
    const productName = input.closest('.product').querySelector('strong').textContent;
    const product = cart.find(item => item.name === productName);
    if (product) {
        product.quantity = newQuantity;
        if (newQuantity === 0) {
            removeFromCart(productName); // Remove product if quantity is zero
            input.closest('.quantity-controls').style.display = 'none'; // Hide quantity controls
            input.closest('.product').querySelector('button').style.display = 'block'; // Show "Add to Cart" button again
        } else {
            saveCart();
            renderCart();
        }
    }
}

// Handle changes to the quantity input directly (when the user modifies it)
function handleQuantityChange(event) {
    const quantityInput = event.target;
    const newQuantity = parseInt(quantityInput.value);
    if (newQuantity >= 1) {
        const productName = quantityInput.closest('.product').querySelector('strong').textContent;
        const product = cart.find(item => item.name === productName);
        if (product) {
            product.quantity = newQuantity;
            saveCart();
            renderCart();
        }
    } else {
        quantityInput.value = 1; // Ensure minimum value is 1
    }
}

// Remove product from cart
function removeFromCart(productName) {
    cart = cart.filter(item => item.name !== productName);
    saveCart();
    renderCart();
}

// Save the cart to localStorage
function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
}

// Render the cart
function renderCart() {
    cartItemsContainer.innerHTML = ''; // Clear previous cart items
    let total = 0;

    cart.forEach(item => {
        const cartItemDiv = document.createElement('div');
        cartItemDiv.className = 'cart-item';

        const itemDetails = document.createElement('div');
        itemDetails.innerHTML = `
            <strong>${item.name}</strong><br>
            Price: ${item.price.toFixed(2)} ₪<br>
            Quantity: <input type="number" value="${item.quantity}" min="1" class="cart-quantity" data-product="${item.name}">
        `;
        cartItemDiv.appendChild(itemDetails);

        const removeButton = document.createElement('button');
        removeButton.textContent = 'X';
        removeButton.onclick = () => removeFromCart(item.name);
        cartItemDiv.appendChild(removeButton);

        total += item.price * item.quantity;
        cartItemsContainer.appendChild(cartItemDiv);
    });

    const totalDiv = document.createElement('div');
    totalDiv.className = 'cart-total';
    totalDiv.innerHTML = `<strong>Total: ${total.toFixed(2)} ₪</strong>`;
    cartItemsContainer.appendChild(totalDiv);

    // Event listener to handle quantity change in cart
    document.querySelectorAll('.cart-quantity').forEach(input => {
        input.addEventListener('change', (event) => {
            handleQuantityChange(event);
        });

        input.addEventListener('blur', (event) => {
            handleQuantityChange(event);
        });

        input.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                handleQuantityChange(event);
            }
        });
    });
}

// Event handler for checkout button
checkoutButton.onclick = () => {
    popup.style.display = 'block';
};

// Event handler for confirm button
confirmButton.onclick = () => {
    const customerName = customerNameInput.value;
    const customerPhone = customerPhoneInput.value;

    if (!customerName || !customerPhone) {
        alert('الرجاء ادخال الأسم و رقم الهاتف.');
        return;
    }

// الحصول على التاريخ والوقت الحالي بتنسيق "يوم/شهر/سنة ساعة:دقيقةم اليوم"
function formatDateTime() {
    const now = new Date();
    const day = now.getDate().toString().padStart(2, '0');
    const month = (now.getMonth() + 1).toString().padStart(2, '0');
    const year = now.getFullYear();
    let hours = now.getHours();
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const ampm = hours >= 12 ? 'م' : 'ص';
    hours = hours % 12;
    hours = hours ? hours : 12; // الساعة 0 تصبح 12
    const dayOfWeek = ["الأحد", "الاثنين", "الثلاثاء", "الأربعاء", "الخميس", "الجمعة", "السبت"][now.getDay()];
    return `${day}/${month}/${year} ${hours}:${minutes}${ampm} ${dayOfWeek}`;
}

// رقم الفاتورة (ثابت دائمًا ####)
const invoiceNumber = "####";

// إضافة الوقت والتاريخ الحالي إلى الفاتورة
let text = `⭐️ Shehadeh Centre ⭐️\n`;
text += `━━━━━━━━━━━━━━━\n`;
text += `📅 التاريخ: ${formatDateTime()}\n`;
text += `📄 رقم الفاتورة: ${invoiceNumber}\n`;
text += `━━━━━━━━━━━━━━━\n\n`;
text += `👤 اسم العميل: ${customerName}\n`;
text += `☎️ رقم الهاتف: ${customerPhone}\n`;
text += `━━━━━━━━━━━━━━━\n\n`;
text += `🛒 تفاصيل المنتجات:\n`;

let total = 0;
cart.forEach(item => {
    text += `\t${item.name}: ${item.quantity}x${item.price.toFixed(2)}\n`;
    text += `─ ─ ─ ─ ─ ─ ─ ─ ─ ─\n`;
    total += item.price * item.quantity;
});

text += `💰 الإجمالي: ${total.toFixed(2)}\n`;
text += `━━━━━━━━━━━━━━━\n`;
text += `شكرًا لاختياركم خدماتنا! 🙏`;

// رابط الواتساب مع الرقم المحدد
const whatsappURL = `https://wa.me/972566888825?text=${encodeURIComponent(text)}`;
window.open(whatsappURL, '_blank');

// لتحديث السلة وحفظها
cart = [];
saveCart();
renderCart();

// إغلاق النافذة المنبثقة
popup.style.display = 'none';

};

cancelButton.onclick = () => {
    popup.style.display = 'none';
};
// الحصول على الأزرار الخاصة بإظهار وإخفاء السلة
const showCartButton = document.getElementById('show-cart-button');
const hideCartButton = document.getElementById('hide-cart-button');
const cartElement = document.getElementById('cart');

// إخفاء السلة عند تحميل الصفحة
cartElement.style.display = 'none';

// عند النقر على زر إظهار السلة
showCartButton.onclick = function() {
    cartElement.style.display = 'block';  // إظهار السلة
    showCartButton.style.display = 'none';  // إخفاء زر الإظهار
    hideCartButton.style.display = 'inline-block';  // إظهار زر الإخفاء
};

// عند النقر على زر إخفاء السلة
hideCartButton.onclick = function() {
    cartElement.style.display = 'none';  // إخفاء السلة
    showCartButton.style.display = 'inline-block';  // إظهار زر الإظهار
    hideCartButton.style.display = 'none';  // إخفاء زر الإخفاء
};
        // منع التكبير عبر اللمس على الهاتف
        document.addEventListener('touchstart', function (event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });

        // منع التكبير بالنقر مرتين
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            let now = (new Date()).getTime();
            if (now - lastTouchEnd <= 100) { // 300ms هو الفاصل الزمني للنقر المزدوج
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, { passive: false });
 
</script>
</body>
</html>
