<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Shehadeh Center — أسعار الأجهزة</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg: #f5f7fb;
  --card: #ffffff;
  --muted: #6b7280;
  --accent: #0b78ff;
  --accent-2: #0bd3b0;
  --danger: #ef4444;
  --radius: 14px;
  --shadow: 0 8px 24px rgba(16,24,40,0.08);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0;background:var(--bg);font-family:'Cairo',sans-serif;color:#0f1724}
a{color:inherit;text-decoration:none}

/* Topbar */
.topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 20px;background:linear-gradient(90deg,#072b6b,#0b78ff);color:white;box-shadow:var(--shadow);position:sticky;top:0;z-index:40}
.brand{display:flex;align-items:center;gap:12px}
.brand img{width:44px;height:44px;border-radius:8px;object-fit:cover}
.brand h1{margin:0;font-size:18px;font-weight:700}
.controls{display:flex;align-items:center;gap:8px}
.btn{background:transparent;border:none;color:inherit;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600}
.btn.primary{background:white;color:var(--accent);padding:10px 14px;box-shadow:0 6px 18px rgba(11,120,255,0.12)}
.search{position:relative}
#search-box{width:280px;padding:10px 12px;border-radius:12px;border:none;background:linear-gradient(180deg,#f1f5f9,#eef2ff);outline:none}
.search-suggestions{position:absolute;right:0;top:44px;background:white;box-shadow:var(--shadow);border-radius:10px;overflow:hidden;display:none;z-index:50;max-width:380px}
.search-suggestions div{padding:8px 10px;cursor:pointer}
.search-suggestions div:hover{background:#f1f5f9}

/* Layout */
.container{display:grid;grid-template-columns:1fr 380px;gap:20px;padding:22px;max-width:1200px;margin:20px auto}
@media(max-width:980px){.container{grid-template-columns:1fr 320px}}
@media(max-width:880px){.container{grid-template-columns:1fr;padding:12px}#search-box{width:100%}}

/* Panels */
.panel{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
.categories{display:flex;flex-direction:column;gap:18px}
.category h2{margin:0 0 8px 0;font-size:18px;color:var(--accent)}
.products-grid{display:flex;flex-wrap:wrap;gap:14px}

/* Product card */
.product{width:260px;background:linear-gradient(180deg,#ffffff,#fbfdff);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(11,120,255,0.06);display:flex;flex-direction:column;gap:10px;transition:transform .18s,box-shadow .18s}
.product:hover{transform:translateY(-6px);box-shadow:0 16px 36px rgba(11,120,255,0.08)}
.product img{width:100%;height:160px;object-fit:cover;border-radius:8px}
.product .meta{display:flex;justify-content:space-between;align-items:center;gap:8px}
.product .name{font-weight:700;color:#0b2b50}
.product .price{color:var(--accent);font-weight:800}
.add-to-cart-btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));border:none;color:white;padding:10px;border-radius:10px;cursor:pointer;font-weight:700}

/* Screens category list style (no images) */
.category-screens .products-grid{flex-direction:column}
.category-screens .product{flex-direction:row;align-items:center;justify-content:space-between;padding:12px 16px;height:auto}
.category-screens .product img{display:none}
.category-screens .name{font-size:15px}

/* Side cart (panel) */
.cart-panel{position:sticky;top:20px;height:calc(100vh - 40px);overflow:auto}
.cart-box{display:flex;flex-direction:column;gap:12px;padding:14px;border-radius:12px;background:linear-gradient(180deg,#ffffff,#fbfbff);box-shadow:var(--shadow)}
.cart-header{display:flex;justify-content:space-between;align-items:center}
.cart-items{display:flex;flex-direction:column;gap:10px;max-height:50vh;overflow:auto}
.cart-item{display:flex;gap:10px;align-items:center;justify-content:space-between;background:#fff;padding:8px;border-radius:10px;border:1px solid #eef2ff}
.cart-item img{width:48px;height:48px;border-radius:8px;object-fit:cover}
.cart-footer{margin-top:auto;display:flex;flex-direction:column;gap:8px}
.small{font-size:12px;color:var(--muted)}

/* Utilities */
.hidden{display:none!important}
#back-to-top{position:fixed;right:20px;bottom:20px;background:var(--accent);color:white;border:none;border-radius:50%;width:45px;height:45px;display:none;align-items:center;justify-content:center;z-index:60;cursor:pointer;box-shadow:var(--shadow)}
label.small{font-size:13px;color:var(--muted)}
.input-pill{padding:8px;border-radius:10px;border:1px solid #eef2ff}

/* responsive product width */
@media(max-width:700px){.product{width:100%}}
</style>
</head>
<body>

<!-- Topbar -->
<div class="topbar" role="banner">
  <div class="brand">
    <img src="https://i.postimg.cc/VNssYbVS/IMG-1002.jpg" alt="logo">
    <div>
      <h1>Shehadeh Center</h1>
      <div class="small">أسعار الأجهزة — تحديث عصري</div>
    </div>
  </div>

  <div class="controls">
    <div class="search" role="search">
      <input id="search-box" type="search" placeholder="ابحث عن منتج أو فئة..." aria-label="بحث">
      <div class="search-suggestions" id="search-suggestions"></div>
    </div>

    <div id="file-buttons" class="file-buttons" aria-label="قائمة الكتالوجات"></div>
    <button id="toggle-dark" class="btn" title="تبديل الوضع">🌙</button>
    <button id="show-cart-button" class="btn primary" aria-expanded="false">سلة (<span id="cart-total-top">0.00 ₪</span>)</button>
  </div>
</div>

<!-- Main content container -->
<div class="container">
  <main class="main-card">
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:12px;flex-wrap:wrap">
        <h2 style="margin:0">المنتجات</h2>
        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <label class="small">فلتر سعر:</label>
          <input id="price-min" class="input-pill" type="number" placeholder="أدنى" style="width:90px">
          <input id="price-max" class="input-pill" type="number" placeholder="أعلى" style="width:90px">
          <button id="apply-price-filter" class="btn">تطبيق</button>
          <button id="clear-filters" class="btn">إعادة</button>
        </div>
      </div>

      <div id="categories" class="categories"></div>
    </div>
  </main>

  <aside class="cart-panel">
    <div class="cart-box panel">
      <div class="cart-header">
        <div>
          <strong>سلة المشتريات</strong>
          <div class="small">محفوظة في المتصفح</div>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <button id="export-cart-btn" class="btn" title="تحميل محتوى السلة">تحميل</button>
          <button id="print-cart-btn" class="btn" title="طباعة الفاتورة">طباعة</button>
          <button id="clear-cart-btn" class="btn" title="تفريغ السلة">✖</button>
        </div>
      </div>

      <div id="cart-items" class="cart-items"></div>

      <div class="cart-footer">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div class="small">الإجمالي</div>
          <div id="cart-total" style="font-weight:800;color:var(--accent)">₪ 0.00</div>
        </div>
        <div style="display:flex;gap:8px">
          <button id="checkout-button" class="add-to-cart-btn" style="flex:1">إرسال الطلب عبر واتساب</button>
          <button id="hide-cart-button" class="btn">إخفاء</button>
        </div>
      </div>
    </div>
  </aside>
</div>

<!-- Back to top -->
<button id="back-to-top" title="العودة للأعلى">⬆</button>

<!-- Popup (order form) -->
<div class="popup" id="popup" style="display:none;z-index:9999;position:fixed;inset:0;align-items:center;justify-content:center;">
  <div class="panel" style="max-width:420px;margin:0 auto">
    <h3>إتمام الطلب</h3>
    <input id="customer-name" type="text" placeholder="الاسم" style="width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #eef2fb">
    <input id="customer-phone" type="text" placeholder="الهاتف" style="width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #eef2fb">
    <div style="display:flex;gap:8px;justify-content:flex-end">
      <button id="confirm-button" class="add-to-cart-btn">إرسال</button>
      <button id="cancel-button" class="btn">إلغاء</button>
    </div>
  </div>
</div>

<!-- small default image (data URI) to avoid broken images -->
<img id="__default_img" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='300'><rect width='100%' height='100%' fill='%23f3f4f6'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%23888' font-size='18'>صورة افتراضية</text></svg>" style="display:none">

<script>
/* ---------- بيانات وتهيئة ---------- */
const categoriesContainer = document.getElementById('categories');
const cartItemsContainer = document.getElementById('cart-items');
const checkoutButton = document.getElementById('checkout-button');
const popup = document.getElementById('popup');
const confirmButton = document.getElementById('confirm-button');
const cancelButton = document.getElementById('cancel-button');
const customerNameInput = document.getElementById('customer-name');
const customerPhoneInput = document.getElementById('customer-phone');

let products = [];
let cart = JSON.parse(localStorage.getItem('cart') || '[]');

/* ---------- أزرار اختيار الملفات (كتالوجات) ---------- */
const fileButtonsContainer = document.getElementById('file-buttons');
const fileButtons = [
  { label: 'أسعار الأجهزة', fileName: 'test.md' },
  { label: 'أسعار الشاشات', fileName: 'lcd.md' },
  { label: 'أسعار الاكسسوارات', fileName: 'abc.md' }
];
fileButtons.forEach(b => {
  const btn = document.createElement('button');
  btn.className = 'btn';
  btn.textContent = b.label;
  btn.onclick = () => loadProductsFromFile(b.fileName);
  fileButtonsContainer.appendChild(btn);
});

/* تحميل مبدئي */
window.addEventListener('load', () => loadProductsFromFile('test.md'));

/* ---------- دالة تحميل المنتجات من ملف نصي (خطك الأصلي) ---------- */
/*
  يفترض أن كل سطر في الملف بالشكل:
  الفئة/اسم المنتج/السعر/رابط الصورة أو مسار الصورة
  مثل: موبايل/Samsung A14/599.00/https://...
*/
function loadProductsFromFile(fileName){
  products = [];
  fetch(fileName)
    .then(r => {
      if(!r.ok) throw new Error('file not found');
      return r.text();
    })
    .then(data => {
      const lines = data.split(/\r?\n/);
      lines.forEach(line => {
        if(!line.trim()) return;
        const parts = line.split('/');
        // دعم الأسماء التي تحتوي "/" بباقي الأجزاء كصورة
        if(parts.length >= 3){
          const category = (parts[0] || '').trim();
          const name = (parts[1] || '').trim();
          const priceRaw = (parts[2] || '').trim();
          let price = parseFloat(priceRaw);
          if(isNaN(price)) price = NaN;
          // الصورة إن وجدت تكون من الجزء 3 فصاعداً
          const image = parts.slice(3).join('/').trim() || '';
          products.push({ category, name, price, image });
        }
      });
      renderCategories();
      createFilterButtons();
      renderCart();
      markScreensCategory(); // تصنيف الشاشات فوراً
    })
    .catch(err => {
      console.error('خطأ عند تحميل الملف:', err);
      // رسالة للمستخدم بسيطة
      categoriesContainer.innerHTML = '<div class="panel">فشل تحميل الملف. تأكد من وجود الملف على نفس المسار.</div>';
    });
}

/* ---------- عرض الفئات والمنتجات ---------- */
function renderCategories(){
  categoriesContainer.innerHTML = '';
  const categories = [...new Set(products.map(p => p.category))];
  categories.forEach(category => {
    const catDiv = document.createElement('div');
    catDiv.className = 'category panel';
    const title = document.createElement('h2');
    title.textContent = category;
    catDiv.appendChild(title);

    const grid = document.createElement('div');
    grid.className = 'products-grid';

    const catProducts = products.filter(p => p.category === category);
    catProducts.forEach(prod => {
      const card = document.createElement('div');
      card.className = 'product';

      // الصورة
      const img = document.createElement('img');
      img.alt = prod.name;
      img.src = prod.image || document.getElementById('__default_img').src;
      img.onerror = () => { img.src = document.getElementById('__default_img').src; };
      card.appendChild(img);

      // اسم وسعر
      const meta = document.createElement('div');
      meta.className = 'meta';
      const name = document.createElement('div');
      name.innerHTML = `<div class="name">${prod.name}</div>`;
      const price = document.createElement('div');
      price.innerHTML = `<div class="price">${isNaN(prod.price) ? 'غير متوفر' : prod.price.toFixed(2) + ' ₪'}</div>`;
      meta.appendChild(name);
      meta.appendChild(price);
      card.appendChild(meta);

      // زر إضافة / أدوات كمية
      const qtyControls = document.createElement('div');
      qtyControls.className = 'quantity-controls';
      qtyControls.style.display = 'none';
      qtyControls.style.marginTop = '6px';

      const dec = document.createElement('button'); dec.textContent='−'; dec.className='btn';
      const input = document.createElement('input'); input.type='number'; input.min='1'; input.value='1'; input.style.width='60px'; input.style.padding='8px'; input.style.borderRadius='8px';
      const inc = document.createElement('button'); inc.textContent='+'; inc.className='btn';
      dec.onclick = ()=> changeLocalQuantity(input, -1);
      inc.onclick = ()=> changeLocalQuantity(input, 1);

      qtyControls.appendChild(dec); qtyControls.appendChild(input); qtyControls.appendChild(inc);

      const addBtn = document.createElement('button');
      addBtn.className = 'add-to-cart-btn';
      addBtn.textContent = 'إضافة للسلة';
      if(isNaN(prod.price)) {
        addBtn.disabled = true;
        addBtn.style.opacity = '0.6';
      } else {
        addBtn.onclick = () => { addToCart(prod, parseInt(input.value || 1)); qtyControls.style.display = 'flex'; addBtn.style.display='none'; };
      }

      // تحقق إن المنتج موجود في السلة من قبل
      const existed = cart.find(i=> i.name === prod.name);
      if(existed){ qtyControls.style.display='flex'; addBtn.style.display='none'; input.value = existed.quantity; }

      card.appendChild(qtyControls);
      card.appendChild(addBtn);

      grid.appendChild(card);
    });

    catDiv.appendChild(grid);
    categoriesContainer.appendChild(catDiv);
  });

  // بعد العرض، علّم فئات الشاشات
  markScreensCategory();
}

/* ---------- فلتر / أزرار الفئات ---------- */
function createFilterButtons(){
  // هذه وظيفة بسيطة: لنغير المحتوى العلوي إن أردنا لاحقاً
  // (إبقيتها سهلة للتعديل)
}

/* ---------- بحث ذكي مع اقتراحات ---------- */
const searchBox = document.getElementById('search-box');
const suggestions = document.getElementById('search-suggestions');
searchBox.addEventListener('input', ()=>{
  const q = searchBox.value.toLowerCase().trim();
  suggestions.innerHTML = '';
  if(q.length < 1){ suggestions.style.display = 'none'; renderCategories(); return; }
  const matches = products.filter(p => (p.name + ' ' + p.category).toLowerCase().includes(q)).slice(0,8);
  matches.forEach(m => {
    const e = document.createElement('div'); e.textContent = `${m.name} — ${isNaN(m.price)? 'غير متوفر' : m.price.toFixed(2) + ' ₪'}`;
    e.onclick = () => { searchBox.value = m.name; suggestions.style.display='none'; renderFilteredProducts([m]); };
    suggestions.appendChild(e);
  });
  suggestions.style.display = matches.length ? 'block' : 'none';
});

function renderFilteredProducts(list){
  // عرض قائمة المنتجات المعطاة (بناءً على renderCategories لكنه أبسط)
  categoriesContainer.innerHTML = '';
  // نجمع حسب الفئة
  const cats = [...new Set(list.map(p=>p.category))];
  cats.forEach(category=>{
    const catDiv = document.createElement('div'); catDiv.className='category panel';
    const title = document.createElement('h2'); title.textContent = category; catDiv.appendChild(title);
    const grid = document.createElement('div'); grid.className='products-grid';
    list.filter(p=>p.category===category).forEach(prod=>{
      const card = document.createElement('div'); card.className='product';
      const img = document.createElement('img'); img.alt = prod.name; img.src = prod.image || document.getElementById('__default_img').src;
      img.onerror = ()=> img.src = document.getElementById('__default_img').src;
      card.appendChild(img);
      const meta = document.createElement('div'); meta.className='meta';
      meta.innerHTML = `<div class="name">${prod.name}</div><div class="price">${isNaN(prod.price)? 'غير متوفر' : prod.price.toFixed(2) + ' ₪'}</div>`;
      card.appendChild(meta);
      // simplified add button
      const addBtn = document.createElement('button'); addBtn.className='add-to-cart-btn'; addBtn.textContent='إضافة للسلة';
      if(isNaN(prod.price)) addBtn.disabled=true; else addBtn.onclick = ()=> { addToCart(prod,1); renderCart(); };
      card.appendChild(addBtn);
      grid.appendChild(card);
    });
    catDiv.appendChild(grid);
    categoriesContainer.appendChild(catDiv);
  });
}

/* ---------- فلتر بالسعر ---------- */
document.getElementById('apply-price-filter').addEventListener('click', ()=>{
  const min = parseFloat(document.getElementById('price-min').value || 0);
  const maxVal = document.getElementById('price-max').value;
  const max = maxVal === '' ? Infinity : parseFloat(maxVal);
  const filtered = products.filter(p => !isNaN(p.price) && p.price >= min && p.price <= max);
  if(filtered.length) renderFilteredProducts(filtered);
  else renderCategories();
});
document.getElementById('clear-filters').addEventListener('click', ()=>{ document.getElementById('price-min').value=''; document.getElementById('price-max').value=''; renderCategories(); });

/* ---------- تعديل كمية محلية (±) ---------- */
function changeLocalQuantity(input, delta){
  let n = parseInt(input.value || 1) + delta;
  if(n < 1) n = 1;
  input.value = n;
}

/* ---------- سلة الشراء: إضافة/حذف/تحديث ---------- */
function addToCart(product, quantity){
  quantity = parseInt(quantity) || 1;
  const exist = cart.find(i => i.name === product.name);
  if(exist){ exist.quantity += quantity; }
  else { cart.push({...product, quantity}); }
  saveCart(); renderCart();
}

function removeFromCart(productName){
  cart = cart.filter(i => i.name !== productName);
  saveCart(); renderCart();
}

function saveCart(){
  localStorage.setItem('cart', JSON.stringify(cart));
}

function renderCart(){
  cartItemsContainer.innerHTML = '';
  let total = 0;
  cart.forEach(item=>{
    const itm = document.createElement('div'); itm.className = 'cart-item';
    const left = document.createElement('div'); left.style.display='flex'; left.style.alignItems='center'; left.style.gap='8px';
    const img = document.createElement('img'); img.src = item.image || document.getElementById('__default_img').src; img.onerror = ()=> img.src = document.getElementById('__default_img').src;
    const txt = document.createElement('div'); txt.innerHTML = `<div style="font-weight:700">${item.name}</div><div class="small">${item.category}</div>`;
    left.appendChild(img); left.appendChild(txt);

    const right = document.createElement('div'); right.style.textAlign='right';
    const qtyInput = document.createElement('input'); qtyInput.type='number'; qtyInput.value = item.quantity; qtyInput.min = 1; qtyInput.style.width='70px'; qtyInput.addEventListener('change', (e)=> {
      const val = parseInt(e.target.value) || 1;
      item.quantity = val; saveCart(); renderCart();
    });
    const priceText = document.createElement('div'); priceText.innerHTML = `₪ ${(item.price * item.quantity).toFixed(2)}`;
    const removeBtn = document.createElement('button'); removeBtn.className='btn'; removeBtn.innerHTML='حذف'; removeBtn.onclick = ()=> removeFromCart(item.name);
    right.appendChild(priceText); right.appendChild(qtyInput); right.appendChild(removeBtn);

    itm.appendChild(left); itm.appendChild(right);
    cartItemsContainer.appendChild(itm);

    total += (isNaN(item.price)? 0 : item.price * item.quantity);
  });

  document.getElementById('cart-total').textContent = `₪ ${total.toFixed(2)}`;
  document.getElementById('cart-total-top').textContent = `${total.toFixed(2)} ₪`;
}

/* ---------- تحديث الكاتيجوري شاشات (إخفاء الصور) ---------- */
function markScreensCategory(){
  document.querySelectorAll('.category').forEach(cat=>{
    const title = cat.querySelector('h2')?.textContent?.trim() || '';
    if(title.includes('شاش') || title.includes('شاشة') || title.toLowerCase().includes('screens')) {
      cat.classList.add('category-screens');
    } else {
      cat.classList.remove('category-screens');
    }
  });
}

/* ---------- حفظ حالة السلة فور التحميل ---------- */
renderCart();

/* ---------- زر العودة للأعلى ---------- */
const backBtn = document.getElementById('back-to-top');
window.addEventListener('scroll', ()=> {
  if(window.scrollY > 300) backBtn.style.display = 'flex'; else backBtn.style.display = 'none';
});
backBtn.addEventListener('click', ()=> window.scrollTo({top:0,behavior:'smooth'}));

/* ---------- تصدير السلة كـ JSON ---------- */
document.getElementById('export-cart-btn').addEventListener('click', ()=>{
  const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(cart,null,2));
  const a = document.createElement('a'); a.href = dataStr; a.download='cart.json'; document.body.appendChild(a); a.click(); a.remove();
});

/* ---------- طباعة الفاتورة ---------- */
document.getElementById('print-cart-btn').addEventListener('click', ()=>{
  let html = '<h3>فاتورة طلب</h3><hr>';
  cart.forEach(i => { html += `<div>${i.name} x ${i.quantity} = ₪ ${ (i.price*i.quantity).toFixed(2) }</div>`; });
  html += `<hr><div><strong>الإجمالي: ₪ ${cart.reduce((s,i)=>s + (i.price * i.quantity || 0),0).toFixed(2)}</strong></div>`;
  const w = window.open('','print'); w.document.write('<meta charset="utf-8"><title>فاتورة</title>' + html); w.document.close(); w.print();
});

/* ---------- تفريغ السلة ---------- */
document.getElementById('clear-cart-btn').addEventListener('click', ()=>{
  if(confirm('هل تريد تفريغ السلة؟')){ cart = []; saveCart(); renderCart(); }
});

/* ---------- البوب أب لإرسال الطلب عبر واتساب ---------- */
document.getElementById('show-cart-button').addEventListener('click', ()=> {
  // افتح/اغلق صندوق البوب أب
  popup.style.display = 'flex';
});

// إظهار البوب أب عند الضغط زر "إرسال الطلب"
checkoutButton.addEventListener('click', ()=> { popup.style.display = 'flex'; });

confirmButton.addEventListener('click', ()=> {
  const customerName = customerNameInput.value.trim();
  const customerPhone = customerPhoneInput.value.trim();
  if(!customerName || !customerPhone){ alert('الرجاء إدخال الاسم ورقم الهاتف.'); return; }

  // تجميع نص الفاتورة
  let text = `⭐️ Shehadeh Centre — طلبية ⭐️\n`;
  text += `-------------------------\n`;
  text += `العميل: ${customerName}\n`;
  text += `الهاتف: ${customerPhone}\n`;
  text += `-------------------------\n`;
  let total = 0;
  cart.forEach(i=>{
    const itemTotal = (i.price || 0) * (i.quantity || 1);
    total += itemTotal;
    text += `${i.category} - ${i.name}\n${i.quantity} x ${ (i.price || 0).toFixed(2) } = ${ itemTotal.toFixed(2) } ₪\n`;
    text += '-------------------------\n';
  });
  text += `الإجمالي: ${total.toFixed(2)} ₪\n`;
  text += `شكراً لاختياركم!\n`;

  // افتح واتساب مع رقمك (عدّل الرقم إلى رقمك)
  const phoneNumber = '972566888825'; // إذا أردت تغييره
  const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(text)}`;
  window.open(url, '_blank');

  // مسح السلة بعد الإرسال
  cart = []; saveCart(); renderCart();
  popup.style.display = 'none';
});

// إغلاق البوب أب
cancelButton.addEventListener('click', ()=> popup.style.display = 'none');
window.addEventListener('click', (e)=> { if(e.target === popup) popup.style.display = 'none'; });

/* ---------- وضع ليلي بسيط ---------- */
document.getElementById('toggle-dark').addEventListener('click', function(){
  document.documentElement.classList.toggle('dark-mode');
  if(document.documentElement.classList.contains('dark-mode')){
    document.documentElement.style.setProperty('--bg','#061226');
    document.documentElement.style.setProperty('--card','#071127');
    document.documentElement.style.setProperty('--muted','#9aa8bf');
    document.documentElement.style.setProperty('--accent','#7dd3fc');
    this.textContent = '☀️';
  } else {
    document.documentElement.style.setProperty('--bg','#f5f7fb');
    document.documentElement.style.setProperty('--card','#ffffff');
    document.documentElement.style.setProperty('--muted','#6b7280');
    document.documentElement.style.setProperty('--accent','#0b78ff');
    this.textContent = '🌙';
  }
});

/* ---------- استدعاءات وفحص تلقائي لتعليم شاشات ---------- */
function ensureMarkScreensLater(){ setTimeout(markScreensCategory, 300); }
setInterval(markScreensCategory, 900);

/* ---------- ملاحظة للمستخدم ---------- */
/*
  - هذا الملف يعتمد على وجود ملفات النص (test.md, lcd.md, abc.md) في نفس المجلد.
  - صيغة كل سطر: الفئة/الاسم/السعر/رابط_الصورة
  - إذا أردت أضع لك مثال للملفات الثلاثة أيضاً أرسله لك.
*/

</script>
</body>
</html>