<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ - Ø­Ù„ ÙƒØ§Ù…Ù„</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
        }
        .btn-primary {
            background: linear-gradient(to right, #4f46e5, #7c3aed);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 70, 229, 0.3);
        }
        .country-btn.active {
            border-color: #4f46e5;
            background-color: #f5f3ff;
        }
        .recaptcha-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center p-4">
    <div class="w-full max-w-md mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-white mb-2">
                <i class="fas fa-mobile-alt mr-2"></i>
                ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
            </h1>
            <p class="text-gray-200">Ø§Ù„Ø­Ù„ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù…Ø´ÙƒÙ„Ø© Ø±Ù…ÙˆØ² Ø§Ù„Ø¯ÙˆÙ„</p>
        </header>

        <!-- Ø¨Ø·Ø§Ù‚Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
        <div class="card rounded-2xl shadow-2xl p-6 mb-6">
            <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø© -->
            <div id="message" class="hidden p-4 rounded-lg mb-4 text-center"></div>
            
            <!-- reCAPTCHA Container -->
            <div id="recaptcha-container" class="recaptcha-container"></div>
            
            <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ -->
            <div id="phone-auth-container">
                <div class="mb-6">
                    <label class="block text-gray-700 mb-2 font-medium">
                        <i class="fas fa-globe text-indigo-600 mr-2"></i>
                        Ø§Ø®ØªØ± Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©
                    </label>
                    
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <button 
                            id="country-972" 
                            class="country-btn p-4 border-2 border-indigo-300 rounded-lg flex flex-col items-center bg-indigo-50"
                            data-code="972"
                        >
                            <div class="text-2xl mb-2">ğŸ‡µğŸ‡¸</div>
                            <div class="font-bold text-gray-800">ÙÙ„Ø³Ø·ÙŠÙ†</div>
                            <div class="text-gray-600">+972</div>
                            <div class="text-sm text-gray-500 mt-1">Ù…ØµØ±Ø­ Ø¨Ù‡</div>
                        </button>
                        
                        <button 
                            id="country-970" 
                            class="country-btn p-4 border-2 border-gray-200 rounded-lg flex flex-col items-center bg-white"
                            data-code="970"
                        >
                            <div class="text-2xl mb-2">ğŸ‡µğŸ‡¸</div>
                            <div class="font-bold text-gray-800">ÙÙ„Ø³Ø·ÙŠÙ†</div>
                            <div class="text-gray-600">+970</div>
                            <div class="text-sm text-gray-500 mt-1">ØªØ¬Ø±ÙŠØ¨ÙŠ</div>
                        </button>
                    </div>
                    
                    <div class="mb-4">
                        <label for="phone" class="block text-gray-700 mb-2 font-medium">
                            <i class="fas fa-phone text-indigo-600 mr-2"></i>
                            Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
                        </label>
                        <div class="flex">
                            <div id="country-code-display" class="flex items-center justify-center bg-gray-100 rounded-r-lg px-4 border border-gray-300 border-l-0 font-bold text-gray-700 min-w-[80px]">
                                +972
                            </div>
                            <input 
                                type="tel" 
                                id="phone" 
                                class="w-full p-3 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition"
                                placeholder="59XXXXXXX"
                                dir="ltr"
                                maxlength="9"
                            >
                        </div>
                        <input type="hidden" id="country-code" value="972">
                    </div>
                    
                    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù‡Ù…Ø© -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
                        <div class="flex items-start">
                            <i class="fas fa-info-circle text-blue-500 mt-1 mr-2"></i>
                            <div>
                                <p class="text-sm text-blue-800 font-medium">Ù„Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:</p>
                                <ul class="text-xs text-blue-700 list-disc list-inside mt-1">
                                    <li>ØªØ£ÙƒØ¯ Ù…Ù† ØªÙØ¹ÙŠÙ„ Phone Authentication ÙÙŠ Firebase Console</li>
                                    <li>Ø£Ø¶Ù Ø±Ù…ÙˆØ² Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø© (972 ÙÙ‚Ø· Ø­Ø§Ù„ÙŠÙ‹Ø§)</li>
                                    <li>ØªØ­Ù‚Ù‚ Ù…Ù† Ø±ØµÙŠØ¯ Ù…Ø´Ø±ÙˆØ¹ Firebase</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button 
                    id="send-code-btn" 
                    class="btn-primary w-full text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center mb-3"
                >
                    <i class="fas fa-paper-plane mr-2"></i>
                    Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚
                </button>
                
                <!-- Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
                <div class="grid grid-cols-2 gap-3">
                    <button 
                        id="test-number-btn" 
                        class="bg-green-100 text-green-800 border border-green-300 font-medium py-2 px-4 rounded-lg flex items-center justify-center hover:bg-green-200 transition"
                    >
                        <i class="fas fa-flask mr-2"></i>
                        Ø±Ù‚Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ
                    </button>
                    <button 
                        id="debug-btn" 
                        class="bg-yellow-100 text-yellow-800 border border-yellow-300 font-medium py-2 px-4 rounded-lg flex items-center justify-center hover:bg-yellow-200 transition"
                    >
                        <i class="fas fa-bug mr-2"></i>
                        ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£
                    </button>
                </div>
            </div>
            
            <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ -->
            <div id="verify-code-container" class="hidden">
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <div class="flex items-center">
                                <span id="verify-phone-number" class="font-medium text-lg">+972 59XXXXXXX</span>
                            </div>
                            <p class="text-sm text-gray-500">ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø¥Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù…</p>
                        </div>
                    </div>
                    
                    <label for="code" class="block text-gray-700 mb-2 font-medium">
                        <i class="fas fa-key text-indigo-600 mr-2"></i>
                        Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚
                    </label>
                    <div class="flex justify-center space-x-2 mb-4">
                        <input type="text" maxlength="1" class="code-input w-12 h-12 text-center text-2xl font-bold border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition">
                        <input type="text" maxlength="1" class="code-input w-12 h-12 text-center text-2xl font-bold border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition">
                        <input type="text" maxlength="1" class="code-input w-12 h-12 text-center text-2xl font-bold border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition">
                        <input type="text" maxlength="1" class="code-input w-12 h-12 text-center text-2xl font-bold border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition">
                        <input type="text" maxlength="1" class="code-input w-12 h-12 text-center text-2xl font-bold border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition">
                        <input type="text" maxlength="1" class="code-input w-12 h-12 text-center text-2xl font-bold border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition">
                    </div>
                    <input type="hidden" id="verification-code">
                    <p class="text-sm text-gray-500 text-center">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù…</p>
                </div>
                
                <div class="flex space-x-3">
                    <button 
                        id="verify-code-btn" 
                        class="btn-primary flex-1 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center"
                    >
                        <i class="fas fa-check-circle mr-2"></i>
                        ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø±Ù…Ø²
                    </button>
                    <button 
                        id="back-btn" 
                        class="flex-1 border border-gray-300 text-gray-700 font-bold py-3 px-4 rounded-lg flex items-center justify-center"
                    >
                        <i class="fas fa-arrow-right mr-2"></i>
                        Ø±Ø¬ÙˆØ¹
                    </button>
                </div>
                
                <div class="mt-4 text-center">
                    <p class="text-gray-600">Ù„Ù… ÙŠØµÙ„Ùƒ Ø§Ù„Ø±Ù…Ø²ØŸ</p>
                    <button id="resend-code-btn" class="text-indigo-600 font-medium mt-1">
                        Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² (<span id="countdown">60</span> Ø«Ø§Ù†ÙŠØ©)
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
        <div id="user-info" class="hidden card rounded-2xl shadow-2xl p-6">
            <div class="text-center">
                <div class="w-16 h-16 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-user-check text-white text-2xl"></i>
                </div>
                <h2 class="text-xl font-bold text-gray-800 mb-1">ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!</h2>
                <p id="user-phone" class="text-gray-700 mb-4">+972 59XXXXXXX</p>
                
                <div class="bg-gray-100 p-4 rounded-lg mb-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-gray-700"><strong>Ù†ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:</strong></span>
                        <span id="auth-type" class="text-sm font-medium">Firebase</span>
                    </div>
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-gray-700"><strong>Ø§Ù„ÙˆÙ‚Øª:</strong></span>
                        <span id="login-time" class="text-sm font-medium">--:--</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-700"><strong>Ø§Ù„Ù…Ø¹Ø±Ù:</strong></span>
                        <span id="user-id" class="text-xs font-mono truncate max-w-[150px]">---</span>
                    </div>
                </div>
                
                <button 
                    id="logout-btn" 
                    class="w-full bg-gray-200 text-gray-800 font-bold py-3 px-4 rounded-lg flex items-center justify-center hover:bg-gray-300 transition"
                >
                    <i class="fas fa-sign-out-alt mr-2"></i>
                    ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                </button>
            </div>
        </div>
        
        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ø¥ØµÙ„Ø§Ø­ -->
        <div id="debug-panel" class="hidden bg-white bg-opacity-95 rounded-xl p-4 mt-6">
            <h3 class="font-bold text-gray-800 mb-3 flex items-center">
                <i class="fas fa-cogs mr-2"></i>
                Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ø¥ØµÙ„Ø§Ø­
            </h3>
            
            <div class="space-y-3">
                <div>
                    <h4 class="text-sm font-medium text-gray-700 mb-2">Ø­Ø§Ù„Ø© Firebase:</h4>
                    <div id="firebase-status" class="text-xs p-2 bg-gray-100 rounded">
                        Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...
                    </div>
                </div>
                
                <div>
                    <h4 class="text-sm font-medium text-gray-700 mb-2">Ø¥ØµÙ„Ø§Ø­ reCAPTCHA:</h4>
                    <button 
                        id="reset-recaptcha-btn" 
                        class="w-full text-xs bg-red-100 text-red-800 border border-red-300 font-medium py-2 px-3 rounded-lg hover:bg-red-200 transition"
                    >
                        Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† reCAPTCHA
                    </button>
                </div>
                
                <div>
                    <h4 class="text-sm font-medium text-gray-700 mb-2">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„:</h4>
                    <div class="grid grid-cols-2 gap-2">
                        <button 
                            id="test-972-btn" 
                            class="text-xs bg-blue-100 text-blue-800 border border-blue-300 font-medium py-2 px-3 rounded-lg hover:bg-blue-200 transition"
                        >
                            Ø§Ø®ØªØ¨Ø§Ø± +972
                        </button>
                        <button 
                            id="test-firebase-btn" 
                            class="text-xs bg-green-100 text-green-800 border border-green-300 font-medium py-2 px-3 rounded-lg hover:bg-green-200 transition"
                        >
                            Ø§Ø®ØªØ¨Ø§Ø± Firebase
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ØªÙƒÙˆÙŠÙ† Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBWfV0Z1yKxJ-lGJHzi5gStMGTE3CNxmMg",
            authDomain: "aasa-8a079.firebaseapp.com",
            projectId: "aasa-8a079",
            storageBucket: "aasa-8a079.firebasestorage.app",
            messagingSenderId: "849330713582",
            appId: "1:849330713582:web:7a11b11ebdb5cdcc8b14ff",
            measurementId: "G-LY2WSQ21GE"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        let app;
        let auth;
        let recaptchaVerifier;
        let recaptchaWidgetId;

        try {
            app = firebase.initializeApp(firebaseConfig);
            auth = firebase.auth();
            console.log("âœ… Firebase initialized successfully");
        } catch (error) {
            console.error("âŒ Firebase initialization error:", error);
        }

        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        let confirmationResult = null;
        let countdownInterval = null;
        let countdownTime = 60;
        let selectedCountryCode = "972";
        let isTestMode = false;

        // Ø¹Ù†Ø§ØµØ± DOM
        const elements = {
            phoneInput: document.getElementById('phone'),
            sendCodeBtn: document.getElementById('send-code-btn'),
            verifyCodeBtn: document.getElementById('verify-code-btn'),
            resendCodeBtn: document.getElementById('resend-code-btn'),
            backBtn: document.getElementById('back-btn'),
            logoutBtn: document.getElementById('logout-btn'),
            testNumberBtn: document.getElementById('test-number-btn'),
            debugBtn: document.getElementById('debug-btn'),
            phoneAuthContainer: document.getElementById('phone-auth-container'),
            verifyCodeContainer: document.getElementById('verify-code-container'),
            userInfoContainer: document.getElementById('user-info'),
            debugPanel: document.getElementById('debug-panel'),
            messageDiv: document.getElementById('message'),
            codeInputs: document.querySelectorAll('.code-input'),
            verificationCodeInput: document.getElementById('verification-code'),
            userPhoneSpan: document.getElementById('user-phone'),
            authTypeSpan: document.getElementById('auth-type'),
            userIdSpan: document.getElementById('user-id'),
            loginTimeSpan: document.getElementById('login-time'),
            countryCodeInput: document.getElementById('country-code'),
            countryCodeDisplay: document.getElementById('country-code-display'),
            country972Btn: document.getElementById('country-972'),
            country970Btn: document.getElementById('country-970'),
            countdownSpan: document.getElementById('countdown'),
            recaptchaContainer: document.getElementById('recaptcha-container'),
            resetRecaptchaBtn: document.getElementById('reset-recaptcha-btn'),
            test972Btn: document.getElementById('test-972-btn'),
            testFirebaseBtn: document.getElementById('test-firebase-btn'),
            firebaseStatus: document.getElementById('firebase-status')
        };

        // ØªÙ‡ÙŠØ¦Ø© reCAPTCHA
        function initializeRecaptcha() {
            try {
                if (recaptchaVerifier) {
                    recaptchaVerifier.clear();
                }
                
                // Ø¥Ù†Ø´Ø§Ø¡ reCAPTCHA Ù…Ø±Ø¦ÙŠ
                recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
                    'size': 'normal',
                    'callback': (response) => {
                        console.log("âœ… reCAPTCHA solved:", response);
                        elements.sendCodeBtn.disabled = false;
                    },
                    'expired-callback': () => {
                        console.log("âŒ reCAPTCHA expired");
                        showMessage('Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰', 'warning');
                        elements.sendCodeBtn.disabled = true;
                    }
                });
                
                recaptchaWidgetId = recaptchaVerifier.render();
                console.log("âœ… reCAPTCHA initialized with widget ID:", recaptchaWidgetId);
                
            } catch (error) {
                console.error("âŒ reCAPTCHA initialization error:", error);
                showMessage('Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ', 'error');
            }
        }

        // Ø§Ø®ØªÙŠØ§Ø± Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©
        function selectCountry(code) {
            selectedCountryCode = code;
            elements.countryCodeInput.value = code;
            elements.countryCodeDisplay.textContent = `+${code}`;
            
            // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¯ÙˆÙ„
            elements.country972Btn.classList.remove('active');
            elements.country970Btn.classList.remove('active');
            
            if (code === "972") {
                elements.country972Btn.classList.add('active');
                elements.phoneInput.placeholder = "59XXXXXXX";
                isTestMode = false;
            } else if (code === "970") {
                elements.country970Btn.classList.add('active');
                elements.phoneInput.placeholder = "59XXXXXXX (ØªØ¬Ø±ÙŠØ¨ÙŠ)";
                isTestMode = true;
            }
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚
        elements.codeInputs.forEach((input, index) => {
            input.addEventListener('input', (e) => {
                if (!/^\d*$/.test(e.target.value)) {
                    e.target.value = '';
                    return;
                }
                
                if (e.target.value && index < elements.codeInputs.length - 1) {
                    elements.codeInputs[index + 1].focus();
                }
                
                updateVerificationCode();
            });
            
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && !e.target.value && index > 0) {
                    elements.codeInputs[index - 1].focus();
                }
            });
        });

        function updateVerificationCode() {
            let code = '';
            elements.codeInputs.forEach(input => {
                code += input.value;
            });
            elements.verificationCodeInput.value = code;
        }

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
        function showMessage(text, type = 'info') {
            elements.messageDiv.textContent = text;
            elements.messageDiv.className = '';
            
            const classes = {
                'success': ['bg-green-100', 'text-green-800', 'border-green-300'],
                'error': ['bg-red-100', 'text-red-800', 'border-red-300'],
                'warning': ['bg-yellow-100', 'text-yellow-800', 'border-yellow-300'],
                'info': ['bg-blue-100', 'text-blue-800', 'border-blue-300']
            };
            
            classes[type].forEach(cls => elements.messageDiv.classList.add(cls));
            elements.messageDiv.classList.remove('hidden');
            
            if (type === 'success') {
                setTimeout(() => elements.messageDiv.classList.add('hidden'), 5000);
            }
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø¤Ù‚Øª
        function startCountdown() {
            countdownTime = 60;
            elements.resendCodeBtn.disabled = true;
            elements.resendCodeBtn.classList.add('opacity-50', 'cursor-not-allowed');
            
            countdownInterval = setInterval(() => {
                countdownTime--;
                elements.countdownSpan.textContent = countdownTime;
                
                if (countdownTime <= 0) {
                    clearInterval(countdownInterval);
                    elements.resendCodeBtn.disabled = false;
                    elements.resendCodeBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                    elements.countdownSpan.textContent = '0';
                }
            }, 1000);
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
        function validatePhoneNumber(phone) {
            if (!phone.trim()) {
                return { valid: false, message: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ' };
            }
            
            const pattern = /^5[0-9]{8}$/;
            if (!pattern.test(phone.trim())) {
                return { 
                    valid: false, 
                    message: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­ (ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 5 ÙˆÙŠØªÙƒÙˆÙ† Ù…Ù† 9 Ø£Ø±Ù‚Ø§Ù…)' 
                };
            }
            
            return { valid: true };
        }

        // Ø§Ù„Ø¥ØµÙ„Ø§Ø­ 1: Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© reCAPTCHA
        function resetRecaptcha() {
            try {
                if (recaptchaVerifier) {
                    recaptchaVerifier.clear();
                }
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø©
                initializeRecaptcha();
                showMessage('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ', 'success');
                
            } catch (error) {
                console.error("âŒ Error resetting reCAPTCHA:", error);
                showMessage('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ', 'error');
            }
        }

        // Ø§Ù„Ø¥ØµÙ„Ø§Ø­ 2: Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Firebase
        async function testFirebaseConnection() {
            try {
                if (!auth) {
                    throw new Error('Firebase ØºÙŠØ± Ù…Ù‡ÙŠØ¦');
                }
                
                showMessage('Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Firebase...', 'info');
                
                // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¤Ù‚Øª Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
                const testResult = await fetch(
                    `https://${firebaseConfig.projectId}.firebaseapp.com/__/auth/iframe?apiKey=${firebaseConfig.apiKey}`
                );
                
                if (testResult.ok) {
                    showMessage('âœ… Ø§ØªØµØ§Ù„ Firebase ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'success');
                    elements.firebaseStatus.innerHTML = '<span class="text-green-600">âœ… Ø§ØªØµØ§Ù„ Ù†Ø´Ø·</span>';
                } else {
                    throw new Error('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase');
                }
                
            } catch (error) {
                console.error("âŒ Firebase connection test failed:", error);
                showMessage(`âŒ ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`, 'error');
                elements.firebaseStatus.innerHTML = '<span class="text-red-600">âŒ Ø§ØªØµØ§Ù„ Ù…Ø¹Ø·Ù„</span>';
            }
        }

        // Ø§Ù„Ø¥ØµÙ„Ø§Ø­ 3: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø±ÙŠ
        function useTestNumber() {
            const testNumbers = {
                '972': '599123456',
                '970': '599123456'
            };
            
            elements.phoneInput.value = testNumbers[selectedCountryCode];
            showMessage('ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø±ÙŠØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', 'info');
            elements.phoneInput.focus();
        }

        // Ø§Ù„Ø¥ØµÙ„Ø§Ø­ 4: Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ø­Ø³Ù†Ø©
        async function sendVerificationCode() {
            const phoneNumber = elements.phoneInput.value.trim();
            const validation = validatePhoneNumber(phoneNumber);
            
            if (!validation.valid) {
                showMessage(validation.message, 'error');
                elements.phoneInput.focus();
                return;
            }
            
            const fullPhoneNumber = `+${selectedCountryCode}${phoneNumber}`;
            
            showMessage(`Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ ${fullPhoneNumber}...`, 'info');
            elements.sendCodeBtn.disabled = true;
            elements.sendCodeBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';
            
            try {
                // Ø§Ù„Ø­Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ø¥Ø¶Ø§ÙØ© ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
                if (selectedCountryCode === "972") {
                    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹ Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©
                    confirmationResult = await Promise.race([
                        auth.signInWithPhoneNumber(fullPhoneNumber, recaptchaVerifier),
                        new Promise((_, reject) => 
                            setTimeout(() => reject(new Error('Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„')), 30000)
                        )
                    ]);
                    
                    showMessage(`âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ ${fullPhoneNumber}`, 'success');
                    
                    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    elements.verifyPhoneNumber.textContent = fullPhoneNumber;
                    elements.phoneAuthContainer.classList.add('hidden');
                    elements.verifyCodeContainer.classList.remove('hidden');
                    
                    startCountdown();
                    elements.codeInputs[0].focus();
                    
                } else if (selectedCountryCode === "970") {
                    // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ø±Ù…Ø² 970
                    showMessage(`[ÙˆØ¶Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ] ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² ÙˆÙ‡Ù…ÙŠ Ø¥Ù„Ù‰ ${fullPhoneNumber}`, 'success');
                    elements.verifyPhoneNumber.textContent = fullPhoneNumber;
                    elements.phoneAuthContainer.classList.add('hidden');
                    elements.verifyCodeContainer.classList.remove('hidden');
                    startCountdown();
                    elements.codeInputs[0].focus();
                }
                
            } catch (error) {
                console.error("âŒ Detailed error:", error);
                
                // ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù„Ø®Ø·Ø£
                let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²';
                let errorDetails = '';
                
                switch (error.code) {
                    case 'auth/invalid-phone-number':
                        errorMessage = 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­';
                        errorDetails = 'ØªØ£ÙƒØ¯ Ù…Ù† ØµÙŠØºØ© Ø§Ù„Ø±Ù‚Ù… ÙˆØ±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©';
                        break;
                    case 'auth/operation-not-allowed':
                        errorMessage = 'Ø§Ù„Ø®Ø¯Ù…Ø© ØºÙŠØ± Ù…ÙØ¹Ù„Ø© ÙÙŠ Firebase Console';
                        errorDetails = 'ØªÙØ¹ÙŠÙ„ Phone Authentication Ù…Ù† Firebase Console';
                        break;
                    case 'auth/quota-exceeded':
                        errorMessage = 'ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­';
                        errorDetails = 'ØªØ­Ù‚Ù‚ Ù…Ù† Ø±ØµÙŠØ¯ Ù…Ø´Ø±ÙˆØ¹ Firebase';
                        break;
                    case 'auth/captcha-check-failed':
                        errorMessage = 'ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ';
                        errorDetails = 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† reCAPTCHA';
                        break;
                    case 'auth/too-many-requests':
                        errorMessage = 'Ø·Ù„Ø¨Ø§Øª ÙƒØ«ÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹';
                        errorDetails = 'Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø«Ù… Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
                        break;
                    default:
                        errorMessage = `Ø®Ø·Ø£: ${error.message || error.code}`;
                        errorDetails = 'ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ­Ø¯Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªØµÙØ­ Ù„Ù„ØªÙØ§ØµÙŠÙ„';
                }
                
                showMessage(`${errorMessage}. ${errorDetails}`, 'error');
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© reCAPTCHA ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„
                if (error.code === 'auth/captcha-check-failed') {
                    setTimeout(resetRecaptcha, 2000);
                }
                
            } finally {
                elements.sendCodeBtn.disabled = false;
                elements.sendCodeBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i> Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚';
            }
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù…Ø² OTP
        async function verifyCode() {
            const code = elements.verificationCodeInput.value;
            
            if (code.length !== 6) {
                showMessage('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù…', 'error');
                return;
            }
            
            showMessage('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²...', 'info');
            elements.verifyCodeBtn.disabled = true;
            elements.verifyCodeBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
            
            try {
                if (selectedCountryCode === "972" && confirmationResult) {
                    // Firebase Ø­Ù‚ÙŠÙ‚ÙŠ
                    const result = await confirmationResult.confirm(code);
                    const user = result.user;
                    
                    showMessage('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Firebase!', 'success');
                    
                    elements.userPhoneSpan.textContent = user.phoneNumber;
                    elements.authTypeSpan.textContent = 'Firebase';
                    elements.userIdSpan.textContent = user.uid;
                    elements.loginTimeSpan.textContent = new Date().toLocaleString('ar-SA');
                    
                } else {
                    // ÙˆØ¶Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ
                    showMessage('âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­ (ÙˆØ¶Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ)', 'success');
                    
                    const fullPhoneNumber = `+${selectedCountryCode}${elements.phoneInput.value.trim()}`;
                    elements.userPhoneSpan.textContent = fullPhoneNumber;
                    elements.authTypeSpan.textContent = 'ØªØ¬Ø±ÙŠØ¨ÙŠ';
                    elements.userIdSpan.textContent = 'demo-' + Date.now();
                    elements.loginTimeSpan.textContent = new Date().toLocaleString('ar-SA');
                }
                
                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
                elements.verifyCodeContainer.classList.add('hidden');
                elements.userInfoContainer.classList.remove('hidden');
                
                // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª
                if (countdownInterval) {
                    clearInterval(countdownInterval);
                }
                
            } catch (error) {
                console.error("âŒ Verification error:", error);
                showMessage('Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©', 'error');
                
                elements.codeInputs.forEach(input => {
                    input.classList.add('border-red-500');
                    setTimeout(() => input.classList.remove('border-red-500'), 1000);
                });
                
            } finally {
                elements.verifyCodeBtn.disabled = false;
                elements.verifyCodeBtn.innerHTML = '<i class="fas fa-check-circle mr-2"></i> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø±Ù…Ø²';
            }
        }

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        function setupEventListeners() {
            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø©
            elements.country972Btn.addEventListener('click', () => selectCountry("972"));
            elements.country970Btn.addEventListener('click', () => selectCountry("970"));
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²
            elements.sendCodeBtn.addEventListener('click', sendVerificationCode);
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²
            elements.verifyCodeBtn.addEventListener('click', verifyCode);
            
            // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
            elements.resendCodeBtn.addEventListener('click', () => {
                if (selectedCountryCode === "972") {
                    showMessage('Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¹ÙˆØ¯Ø© ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©', 'info');
                } else {
                    showMessage('[ØªØ¬Ø±ÙŠØ¨ÙŠ] ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²', 'info');
                    startCountdown();
                    elements.codeInputs.forEach(input => input.value = '');
                    updateVerificationCode();
                    elements.codeInputs[0].focus();
                }
            });
            
            // Ø§Ù„Ø±Ø¬ÙˆØ¹
            elements.backBtn.addEventListener('click', () => {
                elements.verifyCodeContainer.classList.add('hidden');
                elements.phoneAuthContainer.classList.remove('hidden');
                showMessage('', 'info');
                
                if (countdownInterval) {
                    clearInterval(countdownInterval);
                    elements.resendCodeBtn.disabled = false;
                    elements.resendCodeBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            });
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            elements.logoutBtn.addEventListener('click', () => {
                if (auth && auth.currentUser) {
                    auth.signOut();
                }
                
                elements.userInfoContainer.classList.add('hidden');
                elements.phoneAuthContainer.classList.remove('hidden');
                
                elements.phoneInput.value = '';
                elements.codeInputs.forEach(input => input.value = '');
                updateVerificationCode();
                selectCountry("972");
                
                showMessage('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                
                if (countdownInterval) {
                    clearInterval(countdownInterval);
                }
            });
            
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø±ÙŠ
            elements.testNumberBtn.addEventListener('click', useTestNumber);
            
            // Ø¹Ø±Ø¶/Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
            elements.debugBtn.addEventListener('click', () => {
                elements.debugPanel.classList.toggle('hidden');
            });
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† reCAPTCHA
            elements.resetRecaptchaBtn.addEventListener('click', resetRecaptcha);
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Firebase
            elements.testFirebaseBtn.addEventListener('click', testFirebaseConnection);
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø±Ù…Ø² 972
            elements.test972Btn.addEventListener('click', () => {
                selectCountry("972");
                elements.phoneInput.value = "599123456";
                showMessage('ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø±ÙŠ Ù„Ø±Ù…Ø² 972', 'info');
            });
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function initializeApp() {
            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            selectCountry("972");
            
            // ØªÙ‡ÙŠØ¦Ø© reCAPTCHA
            if (auth) {
                initializeRecaptcha();
                testFirebaseConnection();
            } else {
                showMessage('âš ï¸ Firebase ØºÙŠØ± Ù…Ù‡ÙŠØ¦. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase.', 'warning');
                elements.firebaseStatus.innerHTML = '<span class="text-yellow-600">âš ï¸ ØºÙŠØ± Ù…Ù‡ÙŠØ¦</span>';
            }
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
            setupEventListeners();
            
            // Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ù‡Ø§ØªÙ
            elements.phoneInput.focus();
            
            console.log("ğŸš€ Application initialized successfully");
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>