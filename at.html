<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نقطة بيع</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: row;
        }
        .products {
            width: 70%;
            padding: 10px;
        }
        .invoice {
            width: 30%;
            border-left: 2px solid #ddd;
            padding: 10px;
            position: fixed;
            right: 0;
            height: 100vh;
            overflow-y: auto;
            background: #f8f8f8;
        }
        .product {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ccc;
            padding: 10px;
            cursor: pointer;
        }
        .product img {
            width: 50px;
            height: 50px;
        }
        .invoice-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
        }
    </style>
</head>
<body>
    <div class="products" id="product-list"></div>
    <div class="invoice" id="invoice">
        <h3>الفاتورة</h3>
        <div id="invoice-items"></div>
        <hr>
        <p>إجمالي السعر: <span id="total-price">0</span> ₪</p>
        <p>عدد الأصناف: <span id="total-items">0</span></p>
        <p>إجمالي الكميات: <span id="total-quantity">0</span></p>
        <button onclick="printInvoice()">طباعة</button>
    </div>
    
    <script>
        async function fetchProducts() {
            const response = await fetch('https://raw.githubusercontent.com/username/repository/main/test.txt');
            const data = await response.text();
            const lines = data.split('\n');
            const productList = document.getElementById('product-list');
            
            lines.forEach(line => {
                if (line.trim() === '') return;
                const [category, model, price, img] = line.split('/');
                
                const productDiv = document.createElement('div');
                productDiv.className = 'product';
                productDiv.innerHTML = `<span>${model} - ${price} ₪</span> <img src="${img}" alt="">`;
                productDiv.onclick = () => addToInvoice(model, price);
                
                productList.appendChild(productDiv);
            });
        }
        
        let invoiceItems = [];
        function addToInvoice(model, price) {
            invoiceItems.push({ model, price: parseFloat(price), quantity: 1 });
            updateInvoice();
        }
        
        function updateInvoice() {
            const invoiceDiv = document.getElementById('invoice-items');
            const totalPriceEl = document.getElementById('total-price');
            const totalItemsEl = document.getElementById('total-items');
            const totalQuantityEl = document.getElementById('total-quantity');
            
            invoiceDiv.innerHTML = '';
            let totalPrice = 0, totalQuantity = 0;
            invoiceItems.forEach(item => {
                totalPrice += item.price;
                totalQuantity += item.quantity;
                const div = document.createElement('div');
                div.className = 'invoice-item';
                div.innerHTML = `<span>${item.model}</span> <span>${item.price} ₪</span>`;
                invoiceDiv.appendChild(div);
            });
            
            totalPriceEl.textContent = totalPrice;
            totalItemsEl.textContent = invoiceItems.length;
            totalQuantityEl.textContent = totalQuantity;
        }
        
        function printInvoice() {
            window.print();
        }
        
        fetchProducts();
    </script>
</body>
</html>
