<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆØ­Ø¯ - VIP</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            font-family: 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);
            min-height: 100vh;
            background-attachment: fixed;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.97);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(to right, #3b82f6, #2563eb);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(to right, #10b981, #059669);
            transition: all 0.3s ease;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
        }
        
        .loading {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(59, 130, 246, 0.2);
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .step-indicator {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
        }
        
        .step-indicator.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
            transform: scale(1.1);
        }
        
        .step-indicator.completed {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        
        .status-connected {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        
        .status-disconnected {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
        
        .status-warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }
        
        .status-blocked {
            background: #fee2e2;
            color: #7f1d1d;
            border: 1px solid #fecaca;
        }
        
        .phone-input {
            direction: ltr;
            text-align: center;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }
        
        .blocked-message {
            background: linear-gradient(to right, #fee2e2, #fecaca);
            border-right: 4px solid #dc2626;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center p-4 min-h-screen">
    <div class="w-full max-w-md mx-auto">
        <!-- Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù… -->
        <div class="text-center mb-8 slide-in">
            <div class="inline-block p-4 bg-white/20 backdrop-blur-sm rounded-2xl mb-4">
                <i class="fas fa-crown text-white text-4xl"></i>
            </div>
            <h1 class="text-3xl font-bold text-white mb-2">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆØ­Ø¯ VIP</h1>
            <p class="text-blue-100 opacity-90">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø­Ø³Ø§Ø¨ VIP</p>
        </div>

        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div class="card rounded-2xl shadow-2xl p-6 mb-6">
            <!-- Ø´Ø±ÙŠØ· Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… -->
            <div class="mb-6 p-4 bg-gray-50 rounded-xl border border-gray-200">
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 rounded-full bg-gray-300" id="system-dot"></div>
                        <span class="text-sm font-medium text-gray-700" id="system-text">Ø¬Ø§Ø±ÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…...</span>
                    </div>
                    <div id="system-badge" class="status-badge">...</div>
                </div>
                
                <div class="grid grid-cols-2 gap-3 text-xs">
                    <div class="flex items-center justify-between p-2 bg-white rounded-lg">
                        <span class="text-gray-600">Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</span>
                        <span id="account-status" class="font-medium">...</span>
                    </div>
                    <div class="flex items-center justify-between p-2 bg-white rounded-lg">
                        <span class="text-gray-600">Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</span>
                        <span id="sessions-count" class="font-medium">0</span>
                    </div>
                </div>
            </div>

            <!-- Ù…Ø¤Ø´Ø± Ø§Ù„ØªÙ‚Ø¯Ù… -->
            <div class="flex items-center justify-center mb-8">
                <div class="flex items-center">
                    <div class="step-indicator active" id="step1">
                        <span>1</span>
                    </div>
                    <div class="w-20 h-1 bg-gray-300 mx-2"></div>
                    <div class="step-indicator" id="step2">
                        <span>2</span>
                    </div>
                </div>
            </div>

            <!-- Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø­Ø¸Ø± -->
            <div id="blocked-template" class="hidden">
                <div class="blocked-message p-4 rounded-xl mb-4">
                    <div class="flex items-start gap-3">
                        <i class="fas fa-ban text-red-600 text-xl mt-1"></i>
                        <div>
                            <h3 class="font-bold text-red-800 mb-1">ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø¤Ù‚ØªØ§Ù‹</h3>
                            <p class="text-sm text-red-700 mb-2" id="block-reason"></p>
                            <p class="text-xs text-red-600">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ <span id="block-time">30</span> Ø¯Ù‚ÙŠÙ‚Ø©</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… -->
            <div id="step1-content" class="step-content">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-phone-alt text-blue-600 text-2xl"></i>
                    </div>
                    <h2 class="text-xl font-bold text-gray-800 mb-2">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ</h2>
                    <p class="text-gray-600">Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ VIP Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ</p>
                </div>

                <div class="space-y-4">
                    <!-- Ø§Ø®ØªÙŠØ§Ø± Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø© -->
                    <div>
                        <label class="block text-gray-700 mb-2 font-medium">
                            <i class="fas fa-globe-asia text-blue-500 mr-2"></i>
                            Ø§Ø®ØªØ± Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©
                        </label>
                        <div class="grid grid-cols-2 gap-3">
                            <button type="button" id="btn-972" 
                                    class="country-btn active border-blue-500 bg-blue-50" 
                                    onclick="selectCountry('972')">
                                <span class="text-lg"></span>
                                <span class="font-bold">+972</span>
                                <span class="text-xs text-gray-600">ÙÙ„Ø³Ø·ÙŠÙ†</span>
                            </button>
                            <button type="button" id="btn-970" 
                                    class="country-btn border-gray-300 bg-gray-50" 
                                    onclick="selectCountry('970')">
                                <span class="text-lg"></span>
                                <span class="font-bold">+970</span>
                                <span class="text-xs text-gray-600">ÙÙ„Ø³Ø·ÙŠÙ†</span>
                            </button>
                        </div>
                    </div>

                    <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… -->
                    <div>
                        <label class="block text-gray-700 mb-2 font-medium">
                            <i class="fas fa-mobile-alt text-blue-500 mr-2"></i>
                            Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
                        </label>
                        <div class="flex items-center border-2 border-gray-300 rounded-xl overflow-hidden transition-all duration-300 focus-within:border-blue-500 focus-within:shadow-md">
                            <div class="bg-gray-50 px-4 py-3 font-bold text-gray-700 border-l border-gray-300">
                                <span id="country-code">+972</span>
                            </div>
                            <input type="tel" 
                                   id="phone-number" 
                                   class="flex-1 p-3 outline-none phone-input text-lg font-medium"
                                   placeholder="59XXXXXXX"
                                   maxlength="9"
                                   oninput="formatPhoneNumber(this)">
                        </div>
                        <div class="flex items-center justify-between mt-2">
                            <p class="text-sm text-gray-500">
                                <i class="fas fa-info-circle mr-1"></i>
                                ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 5 ÙˆÙŠØªÙƒÙˆÙ† Ù…Ù† 9 Ø£Ø±Ù‚Ø§Ù…
                            </p>
                            <button type="button" 
                                    onclick="fillTestNumber()" 
                                    class="text-sm text-blue-600 hover:text-blue-800 font-medium">
                                <i class="fas fa-vial mr-1"></i>
                                Ø±Ù‚Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ
                            </button>
                        </div>
                    </div>

                    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ -->
                    <div class="bg-blue-50 p-4 rounded-xl">
                        <h3 class="font-bold text-blue-800 mb-2 flex items-center">
                            <i class="fas fa-info-circle ml-2"></i>
                            Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨
                        </h3>
                        <p class="text-sm text-blue-700 mb-1">
                            <span class="font-bold">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</span> 
                            <span dir="ltr">Ø±Ù‚Ù…_Ø§Ù„Ù‡Ø§ØªÙ@vip.com</span>
                        </p>
                        <p class="text-sm text-blue-700">
                            <span class="font-bold">ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±:</span> 
                            <span dir="ltr">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù†ÙØ³ Ø§Ù„Ø±Ù‚Ù…)</span>
                        </p>
                    </div>
                </div>

                <div class="mt-8">
                    <button type="button" 
                            id="login-btn" 
                            onclick="loginWithPhone()"
                            class="btn-primary w-full text-white font-bold py-3 px-4 rounded-xl flex items-center justify-center gap-2">
                        <i class="fas fa-sign-in-alt"></i>
                        ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    </button>
                </div>
            </div>

            <!-- Ø§Ù„Ø®Ø·ÙˆØ© 2: Ù†ØªÙŠØ¬Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
            <div id="step2-content" class="step-content hidden">
                <div class="text-center mb-6">
                    <div id="result-icon" class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <div class="loading"></div>
                    </div>
                    <h2 class="text-xl font-bold text-gray-800 mb-2" id="result-title">Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...</h2>
                    <p class="text-gray-600" id="result-message">ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ VIP Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</p>
                </div>

                <div id="result-content" class="mb-6">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </div>

                <div class="space-y-3" id="result-actions">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </div>
            </div>
        </div>

        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
        <div class="text-center text-white/90 text-sm space-y-2">
            <p class="flex items-center justify-center gap-2">
                <i class="fas fa-shield-alt"></i>
                <span>Ù†Ø¸Ø§Ù… Ø¢Ù…Ù† - Ø¬Ù„Ø³Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ù„ÙƒÙ„ Ø­Ø³Ø§Ø¨</span>
            </p>
            <p class="flex items-center justify-center gap-2">
                <i class="fas fa-history"></i>
                <span>Ø¨Ø¹Ø¯ 3 Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù…Ù† Ø£Ø¬Ù‡Ø²Ø© Ù…Ø®ØªÙ„ÙØ© ÙŠØªÙ… Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø¤Ù‚ØªØ§Ù‹</span>
            </p>
        </div>
    </div>

<script>
    // ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase =====
    const FIREBASE_CONFIG = {
        apiKey: "AIzaSyBWfV0Z1yKxJ-lGJHzi5gStMGTE3CNxmMg",
        authDomain: "aasa-8a079.firebaseapp.com",
        databaseURL: "https://aasa-8a079-default-rtdb.firebaseio.com",
        projectId: "aasa-8a079",
        storageBucket: "aasa-8a079.firebasestorage.app",
        messagingSenderId: "849330713582",
        appId: "1:849330713582:web:7a11b11ebdb5cdcc8b14ff"
    };

    const TARGET_URL = 'https://mohammad-shehadeh.github.io/price/';
    const SESSION_KEY = 'vip_user_session';
    const MAX_DEVICE_ATTEMPTS = 3; // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
    const BLOCK_DURATION = 30 * 60 * 1000; // 30 Ø¯Ù‚ÙŠÙ‚Ø© Ø¨Ø§Ù„Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©

    // ===== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… =====
    const SYSTEM = {
        app: null,
        auth: null,
        database: null,
        isConnected: false,
        currentStep: 1,
        selectedCountry: '972',
        phoneNumber: '',
        currentUser: null,
        currentDeviceId: null
    };

    // ===== Ø¹Ù†Ø§ØµØ± DOM =====
    const ELEMENTS = {
        systemDot: document.getElementById('system-dot'),
        systemText: document.getElementById('system-text'),
        systemBadge: document.getElementById('system-badge'),
        accountStatus: document.getElementById('account-status'),
        sessionsCount: document.getElementById('sessions-count'),
        step1: document.getElementById('step1'),
        step2: document.getElementById('step2'),
        step1Content: document.getElementById('step1-content'),
        step2Content: document.getElementById('step2-content'),
        countryCode: document.getElementById('country-code'),
        phoneNumber: document.getElementById('phone-number'),
        loginBtn: document.getElementById('login-btn'),
        resultIcon: document.getElementById('result-icon'),
        resultTitle: document.getElementById('result-title'),
        resultMessage: document.getElementById('result-message'),
        resultContent: document.getElementById('result-content'),
        resultActions: document.getElementById('result-actions'),
        blockedTemplate: document.getElementById('blocked-template')
    };

    // ===== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© =====
    function updateSystemStatus(status, message, type = 'info') {
        const colors = {
            success: { dot: '#10b981', badge: 'status-connected', text: 'âœ… ' },
            error: { dot: '#ef4444', badge: 'status-disconnected', text: 'âŒ ' },
            warning: { dot: '#f59e0b', badge: 'status-warning', text: 'âš ï¸ ' },
            blocked: { dot: '#dc2626', badge: 'status-blocked', text: 'ğŸš« ' },
            info: { dot: '#3b82f6', badge: '', text: 'â„¹ï¸ ' }
        };
        
        const color = colors[type] || colors.info;
        if (ELEMENTS.systemDot) ELEMENTS.systemDot.style.backgroundColor = color.dot;
        if (ELEMENTS.systemText) ELEMENTS.systemText.textContent = message;
        if (ELEMENTS.systemBadge) {
            ELEMENTS.systemBadge.className = `status-badge ${color.badge}`;
            ELEMENTS.systemBadge.innerHTML = `${color.text}${getStatusText(type)}`;
        }
    }

    function getStatusText(type) {
        const texts = {
            success: 'Ù…ØªØµÙ„',
            error: 'ØºÙŠØ± Ù…ØªØµÙ„',
            warning: 'ØªØ­Ø°ÙŠØ±',
            blocked: 'Ù…Ø­Ø¸ÙˆØ±',
            info: 'Ø¬Ø§Ø±ÙŠ'
        };
        return texts[type] || type;
    }

    function goToStep(step) {
        SYSTEM.currentStep = step;
        [ELEMENTS.step1, ELEMENTS.step2].forEach((el, index) => {
            if (el) {
                el.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    el.classList.add('completed');
                    el.innerHTML = '<i class="fas fa-check"></i>';
                } else if (index + 1 === step) {
                    el.classList.add('active');
                    el.innerHTML = `<span>${index + 1}</span>`;
                } else {
                    el.innerHTML = `<span>${index + 1}</span>`;
                }
            }
        });
        
        [ELEMENTS.step1Content, ELEMENTS.step2Content].forEach(el => {
            if (el) el.classList.add('hidden');
        });
        
        if (step === 1 && ELEMENTS.step1Content) ELEMENTS.step1Content.classList.remove('hidden');
        else if (step === 2 && ELEMENTS.step2Content) ELEMENTS.step2Content.classList.remove('hidden');
    }

    // ===== Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„Ù„Ø¬Ù‡Ø§Ø² =====
    function generateDeviceId() {
        let deviceId = localStorage.getItem('device_id');
        if (!deviceId) {
            deviceId = 'device_' + Math.random().toString(36).substring(2, 15) + 
                       Math.random().toString(36).substring(2, 15) + 
                       Date.now().toString(36);
            localStorage.setItem('device_id', deviceId);
        }
        return deviceId;
    }

    // ===== Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ IP (ØªØ¬Ø±ÙŠØ¨ÙŠ) =====
    async function getClientIP() {
        try {
            const response = await fetch('https://api.ipify.org?format=json');
            const data = await response.json();
            return data.ip;
        } catch {
            return 'unknown_' + Math.random().toString(36).substring(2, 10);
        }
    }

    // ===== Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø¸Ø± =====
    async function checkAccountBlocked(phoneNumber) {
        const db = SYSTEM.database;
        const blockRef = db.ref(`blocked_accounts/${phoneNumber}`);
        const snapshot = await blockRef.once('value');
        const blockData = snapshot.val();
        
        if (blockData && blockData.blockedUntil > Date.now()) {
            return {
                blocked: true,
                reason: blockData.reason,
                blockedUntil: blockData.blockedUntil,
                attempts: blockData.attempts || []
            };
        }
        
        return { blocked: false };
    }

    // ===== ØªØ³Ø¬ÙŠÙ„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¯Ø®ÙˆÙ„ Ù…Ù† Ø¬Ù‡Ø§Ø² Ø¬Ø¯ÙŠØ¯ =====
    async function recordLoginAttempt(phoneNumber, deviceId, ip) {
        const db = SYSTEM.database;
        const attemptsRef = db.ref(`login_attempts/${phoneNumber}`);
        const snapshot = await attemptsRef.once('value');
        let attempts = snapshot.val() || { devices: {}, count: 0, firstAttempt: Date.now() };
        
        // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (Ø£ÙƒØ«Ø± Ù…Ù† 24 Ø³Ø§Ø¹Ø©)
        const oneDayAgo = Date.now() - (24 * 60 * 60 * 1000);
        if (attempts.firstAttempt < oneDayAgo) {
            attempts = { devices: {}, count: 0, firstAttempt: Date.now() };
        }
        
        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
        if (!attempts.devices[deviceId]) {
            attempts.devices[deviceId] = {
                ip: ip,
                timestamp: Date.now(),
                count: 1
            };
            attempts.count = (attempts.count || 0) + 1;
        } else {
            attempts.devices[deviceId].count += 1;
            attempts.devices[deviceId].timestamp = Date.now();
        }
        
        await attemptsRef.set(attempts);
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­
        if (attempts.count >= MAX_DEVICE_ATTEMPTS) {
            await blockAccount(phoneNumber, 'ØªØ¬Ø§ÙˆØ² Ø¹Ø¯Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ù† Ø£Ø¬Ù‡Ø²Ø© Ù…Ø®ØªÙ„ÙØ©');
            return { blocked: true, reason: 'ØªØ¬Ø§ÙˆØ² Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡Ø§' };
        }
        
        return { blocked: false, attemptsCount: attempts.count };
    }

    // ===== Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ =====
    async function blockAccount(phoneNumber, reason) {
        const db = SYSTEM.database;
        const blockData = {
            reason: reason,
            blockedUntil: Date.now() + BLOCK_DURATION,
            timestamp: Date.now()
        };
        
        await db.ref(`blocked_accounts/${phoneNumber}`).set(blockData);
        
        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        updateSystemStatus('blocked', 'Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø­Ø¸ÙˆØ± Ù…Ø¤Ù‚ØªØ§Ù‹', 'blocked');
        showBlockedMessage(reason, BLOCK_DURATION);
    }

    // ===== Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø¸Ø± =====
    function showBlockedMessage(reason, duration) {
        goToStep(2);
        
        const minutes = Math.ceil(duration / (60 * 1000));
        
        ELEMENTS.resultIcon.innerHTML = '<i class="fas fa-ban text-4xl text-red-600"></i>';
        ELEMENTS.resultTitle.textContent = 'ğŸš« ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨';
        ELEMENTS.resultMessage.textContent = 'Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ù†ÙŠØ©';
        
        ELEMENTS.resultContent.innerHTML = `
            <div class="blocked-message p-4 rounded-xl">
                <div class="flex items-start gap-3">
                    <i class="fas fa-shield-alt text-red-600 text-xl mt-1"></i>
                    <div>
                        <h3 class="font-bold text-red-800 mb-2">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¸Ø±</h3>
                        <p class="text-sm text-red-700 mb-2">${reason}</p>
                        <p class="text-xs text-red-600">Ø³ÙŠØªÙ… Ø±ÙØ¹ Ø§Ù„Ø­Ø¸Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©</p>
                        <p class="text-xs text-red-600 mt-2">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¹Ø¯Ù… Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ù† Ø£Ø¬Ù‡Ø²Ø© Ù…ØªØ¹Ø¯Ø¯Ø©</p>
                    </div>
                </div>
            </div>
        `;
        
        ELEMENTS.resultActions.innerHTML = `
            <button onclick="goToStep(1)" 
                    class="w-full border-2 border-gray-300 text-gray-700 font-bold py-3 px-4 rounded-xl hover:bg-gray-50">
                Ø§Ù„Ø¹ÙˆØ¯Ø©
            </button>
        `;
    }

    // ===== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© =====
    async function manageActiveSessions(phoneNumber, currentDeviceId) {
        const db = SYSTEM.database;
        const sessionsRef = db.ref(`active_sessions/${phoneNumber}`);
        const snapshot = await sessionsRef.once('value');
        const sessions = snapshot.val() || {};
        
        let sessionsList = [];
        let currentSessionFound = false;
        
        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒØ§Ø¦Ù† Ø¥Ù„Ù‰ Ù…ØµÙÙˆÙØ©
        Object.keys(sessions).forEach(key => {
            sessionsList.push({
                deviceId: key,
                ...sessions[key]
            });
        });
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø© Ù„Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø­Ø§Ù„ÙŠ
        const existingSession = sessionsList.find(s => s.deviceId === currentDeviceId);
        if (existingSession) {
            currentSessionFound = true;
            // ØªØ­Ø¯ÙŠØ« ÙˆÙ‚Øª Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            await sessionsRef.child(currentDeviceId).update({
                lastActive: Date.now(),
                ip: await getClientIP()
            });
        }
        
        // ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø£Ø®Ø±Ù‰
        const logoutPromises = sessionsList
            .filter(s => s.deviceId !== currentDeviceId)
            .map(async session => {
                // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ (ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ°Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹)
                console.log(`ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ø§Ù„Ø¬Ù‡Ø§Ø²: ${session.deviceId}`);
                await sessionsRef.child(session.deviceId).remove();
            });
        
        await Promise.all(logoutPromises);
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
        if (!currentSessionFound) {
            await sessionsRef.child(currentDeviceId).set({
                deviceId: currentDeviceId,
                loginTime: Date.now(),
                lastActive: Date.now(),
                ip: await getClientIP()
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        updateSessionsCount(1);
        
        return { success: true, sessionsCount: 1 };
    }

    // ===== ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª =====
    function updateSessionsCount(count) {
        if (ELEMENTS.sessionsCount) {
            ELEMENTS.sessionsCount.textContent = count;
            ELEMENTS.sessionsCount.style.color = count > 1 ? '#dc2626' : '#065f46';
        }
    }

    // ===== ØªÙ‡ÙŠØ¦Ø© Firebase =====
    async function initializeFirebase() {
        try {
            SYSTEM.app = firebase.initializeApp(FIREBASE_CONFIG);
            SYSTEM.auth = firebase.auth();
            SYSTEM.database = firebase.database();
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„
            const connectedRef = SYSTEM.database.ref('.info/connected');
            connectedRef.on('value', (snap) => {
                SYSTEM.isConnected = snap.val() === true;
                if (SYSTEM.isConnected) {
                    updateSystemStatus('success', 'Ø§Ù„Ù†Ø¸Ø§Ù… Ù…ØªØµÙ„ ÙˆØ¬Ø§Ù‡Ø²', 'success');
                } else {
                    updateSystemStatus('warning', 'ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'warning');
                }
            });
            
            SYSTEM.currentDeviceId = generateDeviceId();
            return true;
            
        } catch (error) {
            console.error('Firebase initialization error:', error);
            updateSystemStatus('error', 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            return false;
        }
    }

    // ===== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… =====
    function selectCountry(code) {
        SYSTEM.selectedCountry = code;
        if (ELEMENTS.countryCode) ELEMENTS.countryCode.textContent = `+${code}`;
        
        document.querySelectorAll('.country-btn').forEach(btn => {
            btn.classList.remove('active', 'border-blue-500', 'bg-blue-50');
            btn.classList.add('border-gray-300', 'bg-gray-50');
        });
        
        const activeBtn = document.getElementById(`btn-${code}`);
        if (activeBtn) {
            activeBtn.classList.add('active', 'border-blue-500', 'bg-blue-50');
            activeBtn.classList.remove('border-gray-300', 'bg-gray-50');
        }
    }

    function formatPhoneNumber(input) {
        let value = input.value.replace(/\D/g, '');
        if (value.length > 9) value = value.substring(0, 9);
        input.value = value;
        
        const isValid = value.length === 9 && value.startsWith('5');
        input.parentElement.classList.toggle('border-green-500', isValid);
        input.parentElement.classList.toggle('border-red-500', !isValid && value.length > 0);
        if (ELEMENTS.loginBtn) ELEMENTS.loginBtn.disabled = !isValid;
    }

    function fillTestNumber() {
        const testNumbers = ['599123456', '598765432', '597654321'];
        const randomNumber = testNumbers[Math.floor(Math.random() * testNumbers.length)];
        if (ELEMENTS.phoneNumber) {
            ELEMENTS.phoneNumber.value = randomNumber;
            formatPhoneNumber(ELEMENTS.phoneNumber);
        }
    }

    // ===== Ø¹Ù…Ù„ÙŠØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© =====
    async function loginWithPhone() {
        const phone = ELEMENTS.phoneNumber.value.trim();
        
        if (phone.length !== 9 || !phone.startsWith('5')) {
            alert('âš ï¸ Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªÙƒÙˆÙ† Ù…Ù† 9 Ø£Ø±Ù‚Ø§Ù… ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 5');
            return;
        }
        
        if (!SYSTEM.isConnected) {
            alert('âš ï¸ Ø§Ù„Ù†Ø¸Ø§Ù… ØºÙŠØ± Ù…ØªØµÙ„. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...');
            return;
        }
        
        SYSTEM.phoneNumber = phone;
        const fullPhone = `${SYSTEM.selectedCountry}${phone}`;
        const email = `${fullPhone}@vip.com`;
        const password = phone; // ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù‡ÙŠ Ø§Ù„Ø±Ù‚Ù… Ù†ÙØ³Ù‡
        
        goToStep(2);
        
        ELEMENTS.resultIcon.innerHTML = '<div class="loading"></div>';
        ELEMENTS.resultTitle.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...';
        ELEMENTS.resultMessage.textContent = 'ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø³Ø§Ø¨ VIP';
        
        try {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø¸Ø± Ø£ÙˆÙ„Ø§Ù‹
            const blockCheck = await checkAccountBlocked(fullPhone);
            if (blockCheck.blocked) {
                const remainingTime = blockCheck.blockedUntil - Date.now();
                showBlockedMessage(blockCheck.reason, remainingTime);
                return;
            }
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
            let userCredential;
            try {
                userCredential = await SYSTEM.auth.signInWithEmailAndPassword(email, password);
                console.log('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­');
            } catch (loginError) {
                if (loginError.code === 'auth/user-not-found') {
                    // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
                    userCredential = await SYSTEM.auth.createUserWithEmailAndPassword(email, password);
                    console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯');
                } else {
                    throw loginError;
                }
            }
            
            const user = userCredential.user;
            SYSTEM.currentUser = user;
            
            // ØªØ³Ø¬ÙŠÙ„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
            const ip = await getClientIP();
            const attemptResult = await recordLoginAttempt(fullPhone, SYSTEM.currentDeviceId, ip);
            
            if (attemptResult.blocked) {
                await blockAccount(fullPhone, attemptResult.reason);
                return;
            }
            
            // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© (ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø£Ø®Ø±Ù‰)
            await manageActiveSessions(fullPhone, SYSTEM.currentDeviceId);
            
            // Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ø­Ù„ÙŠØ§Ù‹
            localStorage.setItem(SESSION_KEY, JSON.stringify({
                phone: fullPhone,
                email: email,
                deviceId: SYSTEM.currentDeviceId,
                loginTime: Date.now()
            }));
            
            // Ø¹Ø±Ø¶ Ù†Ø¬Ø§Ø­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            ELEMENTS.resultIcon.innerHTML = '<i class="fas fa-check-circle text-4xl text-green-500"></i>';
            ELEMENTS.resultTitle.textContent = 'âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­';
            ELEMENTS.resultMessage.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ­ÙˆÙŠÙ„Ùƒ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹...';
            
            ELEMENTS.resultContent.innerHTML = `
                <div class="bg-green-50 p-4 rounded-xl">
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</span>
                            <span dir="ltr" class="font-bold text-green-700">${email}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ù„Ø³Ø©:</span>
                            <span class="font-bold text-green-700">Ù†Ø´Ø·Ø© (Ø¬Ù‡Ø§Ø² ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·)</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø£Ø®Ø±Ù‰:</span>
                            <span class="font-bold text-red-600">ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ù‡Ø§</span>
                        </div>
                    </div>
                </div>
            `;
            
            ELEMENTS.resultActions.innerHTML = `
                <a href="${TARGET_URL}" target="_blank"
                   class="btn-success w-full text-white font-bold py-3 px-4 rounded-xl flex items-center justify-center gap-2">
                    <i class="fas fa-external-link-alt"></i>
                    Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹
                </a>
            `;
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨
            if (ELEMENTS.accountStatus) {
                ELEMENTS.accountStatus.textContent = 'âœ… Ù†Ø´Ø·';
                ELEMENTS.accountStatus.style.color = '#065f46';
            }
            
            // ØªØ£Ø®ÙŠØ± Ø«Ù… Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
            setTimeout(() => {
                window.open(TARGET_URL, '_blank');
            }, 3000);
            
        } catch (error) {
            console.error('Login error:', error);
            
            ELEMENTS.resultIcon.innerHTML = '<i class="fas fa-exclamation-triangle text-4xl text-yellow-500"></i>';
            ELEMENTS.resultTitle.textContent = 'âš ï¸ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
            ELEMENTS.resultMessage.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹';
            
            ELEMENTS.resultContent.innerHTML = `
                <div class="bg-yellow-50 p-4 rounded-xl">
                    <p class="text-yellow-700 text-center">${error.message}</p>
                </div>
            `;
            
            ELEMENTS.resultActions.innerHTML = `
                <button onclick="goToStep(1)" 
                        class="btn-primary w-full text-white font-bold py-3 px-4 rounded-xl">
                    <i class="fas fa-redo ml-2"></i>
                    Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
                </button>
            `;
        }
    }

    // ===== Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© =====
    async function checkCurrentSession() {
        const savedSession = localStorage.getItem(SESSION_KEY);
        if (savedSession) {
            try {
                const session = JSON.parse(savedSession);
                const deviceId = generateDeviceId();
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø­Ø§Ù„ÙŠ Ù‡Ùˆ Ù†ÙØ³Ù‡ Ø§Ù„Ù…Ø³Ø¬Ù„
                if (session.deviceId === deviceId) {
                    updateSystemStatus('success', 'Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø©', 'success');
                    if (ELEMENTS.accountStatus) {
                        ELEMENTS.accountStatus.textContent = 'âœ… Ù†Ø´Ø·';
                        ELEMENTS.accountStatus.style.color = '#065f46';
                    }
                    updateSessionsCount(1);
                }
            } catch (e) {
                console.log('No valid session');
            }
        }
    }

    // ===== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… =====
    async function initializeSystem() {
        // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
        window.addEventListener('online', () => updateSystemStatus('success', 'ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„', 'success'));
        window.addEventListener('offline', () => updateSystemStatus('error', 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª', 'error'));
        
        selectCountry('972');
        goToStep(1);
        
        const firebaseReady = await initializeFirebase();
        if (firebaseReady) {
            await checkCurrentSession();
        }
        
        console.log('ğŸš€ Ù†Ø¸Ø§Ù… VIP Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„');
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
    document.addEventListener('DOMContentLoaded', initializeSystem);
</script>
</body>
</html>